{"version":3,"file":"dva-e-lazy-image.template.NAMHQIbX.js","sources":["../../src/utils/renderCssClasses.ts","../../src/components/dva-e-lazy-image/dva-e-lazy-image.template.ts"],"sourcesContent":["export const renderCssClasses = (cssClasses?: string) => {\n  if (cssClasses === undefined) return \"\";\n  return ` ${cssClasses}`;\n};\n","import { html, nothing } from \"lit-html\";\nimport { ifDefined } from \"lit-html/directives/if-defined.js\";\nimport { ANIMATE } from \"Constants/cssClasses\";\nimport { renderIcon } from \"Components/icon/dva-e-icon.template\";\nimport { renderCssClasses } from \"Utils/renderCssClasses\";\n\nimport { DVALazyImage } from \"./dva-e-lazy-image\";\nimport dvaELazyImageShadowScss from \"./dva-e-lazy-image.shadow.scss?inline\";\nimport { RenderLazyImageArgs } from \"./dva-e-lazy-image.types\";\n\ntype LazyImageTemplateParameter = {\n  alt?: string;\n  srcset?: string;\n  sizes?: string;\n  wrapper?: string;\n  component: DVALazyImage;\n};\n\nconst getObjectFitVal = (aspectRatio: string | null) => {\n  if (aspectRatio === \"cover\") return \"cover\";\n  if (aspectRatio === \"contain\") return \"contain\";\n  return \"fill\";\n};\n\nconst getObjectPositionVal = () => {\n  return \"50% 50%\";\n};\n\nconst getAspectRatioClass = (aspectRatio: string | null) => {\n  if (aspectRatio === \"21:9\") return \"dva-e-lazy-image__mask dva-e-lazy-image__mask--21-9\";\n  if (aspectRatio === \"16:9\") return \"dva-e-lazy-image__mask dva-e-lazy-image__mask--16-9\";\n  if (aspectRatio === \"4:3\") return \"dva-e-lazy-image__mask dva-e-lazy-image__mask--4-3\";\n  if (aspectRatio === \"3:2\") return \"dva-e-lazy-image__mask dva-e-lazy-image__mask--3-2\";\n  if (aspectRatio === \"1:1\") return \"dva-e-lazy-image__mask dva-e-lazy-image__mask--1-1\";\n  if (aspectRatio === \"2:3\") return \"dva-e-lazy-image__mask dva-e-lazy-image__mask--2-3\";\n  if (aspectRatio === \"4:5\") return \"dva-e-lazy-image__mask dva-e-lazy-image__mask--4-5\";\n  if (aspectRatio === \"cover\") return \"dva-e-lazy-image__no-ratio dva-e-lazy-image__cover\";\n  if (aspectRatio === \"contain\") return \"dva-e-lazy-image__no-ratio dva-e-lazy-image__contain\";\n  return \"dva-e-lazy-image__no-ratio\";\n};\n\nconst shouldRenderErrorPlaceholder = (args: LazyImageTemplateParameter) => {\n  return !(args.component.hasError === false || args.component.loadingPlaceholderLoaded === true);\n};\n\nconst renderErrorPlaceholder = (args: LazyImageTemplateParameter, forceRender = false) => {\n  if (forceRender === false && !shouldRenderErrorPlaceholder(args)) return \"\";\n\n  return html`\n    <div class=\"dva-e-lazy-image__error-placeholder-box ${args.component.hasError ? ANIMATE : \"\"}\">\n      ${renderIcon(\"dva-icon-image-gallery-72px\", \"dva-e-lazy-image__error-placeholder\")}\n    </div>\n  `;\n};\n\nconst renderPlaceholder = (args: LazyImageTemplateParameter) => {\n  if (args.component.noPlaceholder === true) return nothing;\n  if (args.component.loadingPlaceholder === \"\" || args.component.loadingPlaceholderLoadingError === true) {\n    return renderErrorPlaceholder(args, true);\n  }\n\n  return html`\n    <img\n      draggable=\"false\"\n      class=\"dva-e-lazy-image__img dva-e-lazy-image__img--placeholder\"\n      alt=\"${args.alt}\"\n      src=\"${args.component.loadingPlaceholder}\"\n      @load=${() => {\n        args.component.loadingPlaceholderLoaded = true;\n        args.component.loadingPlaceholderLoadingError = false;\n      }}\n      @error=${() => {\n        args.component.loadingPlaceholderLoaded = false;\n        args.component.loadingPlaceholderLoadingError = true;\n      }}\n      data-object-fit=${getObjectFitVal(args.component.imgAspectRatio)}\n      data-object-position=${getObjectPositionVal()}\n    />\n  `;\n};\n\nexport const lazyImageTemplate = (args: LazyImageTemplateParameter) => {\n  return html`\n    <style>\n      ${dvaELazyImageShadowScss}\n    </style>\n    <div class=\"${getAspectRatioClass(args.component.imgAspectRatio)}\">\n      <div class=\"dva-e-lazy-image__wrapper dva-js-lazy-image__wrapper\">\n        ${renderPlaceholder(args)}\n        <img\n          draggable=\"false\"\n          class=\"dva-js-lazy-image__img dva-e-lazy-image__img\"\n          src=\"\"\n          srcset=\"${args.srcset}\"\n          alt=\"${args.alt}\"\n          sizes=\"${args.sizes}\"\n          data-object-fit=${getObjectFitVal(args.component.imgAspectRatio)}\n          data-object-position=${getObjectPositionVal()}\n        />\n        ${renderErrorPlaceholder(args)}\n      </div>\n    </div>\n  `;\n};\n\nexport const renderLazyImage = (args: RenderLazyImageArgs) => {\n  return html`\n    <dva-e-lazy-image\n      class=\"dva-e-lazy-image${renderCssClasses(args.cssClasses)}\"\n      src=\"${args.src}\"\n      alt=${ifDefined(args.alt)}\n      srcset=${ifDefined(args.srcset)}\n      sizes=${ifDefined(args.sizes)}\n      loading-placeholder=${ifDefined(args.loadingPlaceholder)}\n      aspect-ratio=${ifDefined(args.aspectRatio)}\n      wrapper=${ifDefined(args.wrapper)}\n    >\n    </dva-e-lazy-image>\n  `;\n};\n\nexport interface RenderLazyImagePlaceholderArgs {\n  cssClasses?: string;\n  aspectRatio: string;\n}\n\nexport const renderLazyImagePlaceholder = (args: RenderLazyImagePlaceholderArgs) => {\n  return html`\n    <div\n      class=\"dva-e-lazy-image dva-e-lazy-image--placeholder${renderCssClasses(args.cssClasses)}\"\n      aspect-ratio=\"${args.aspectRatio}\"\n    >\n      <div class=\"dva-e-lazy-image__placeholder-content\">\n        ${renderIcon(\"dva-icon-image-gallery-72px\", \"dva-e-lazy-image__placeholder-icon\")}\n      </div>\n    </div>\n  `;\n};\n"],"names":["renderCssClasses","cssClasses","getObjectFitVal","aspectRatio","getObjectPositionVal","getAspectRatioClass","shouldRenderErrorPlaceholder","args","renderErrorPlaceholder","forceRender","html","ANIMATE","renderIcon","renderPlaceholder","nothing","lazyImageTemplate","dvaELazyImageShadowScss","renderLazyImage","ifDefined"],"mappings":"qMAAa,MAAAA,EAAoBC,GAC3BA,IAAe,OAAkB,GAC9B,IAAIA,CAAU,i9JCgBjBC,EAAmBC,GACnBA,IAAgB,QAAgB,QAChCA,IAAgB,UAAkB,UAC/B,OAGHC,EAAuB,IACpB,UAGHC,EAAuBF,GACvBA,IAAgB,OAAe,sDAC/BA,IAAgB,OAAe,sDAC/BA,IAAgB,MAAc,qDAC9BA,IAAgB,MAAc,qDAC9BA,IAAgB,MAAc,qDAC9BA,IAAgB,MAAc,qDAC9BA,IAAgB,MAAc,qDAC9BA,IAAgB,QAAgB,qDAChCA,IAAgB,UAAkB,uDAC/B,6BAGHG,EAAgCC,GAC7B,EAAEA,EAAK,UAAU,WAAa,IAASA,EAAK,UAAU,2BAA6B,IAGtFC,EAAyB,CAACD,EAAkCE,EAAc,KAC1EA,IAAgB,IAAS,CAACH,EAA6BC,CAAI,EAAU,GAElEG,wDACiDH,EAAK,UAAU,SAAWI,EAAU,EAAE,KACxFC,EAAW,8BAA+B,qCAAqC,CAAC,SAKlFC,EAAqBN,GACrBA,EAAK,UAAU,gBAAkB,GAAaO,EAC9CP,EAAK,UAAU,qBAAuB,IAAMA,EAAK,UAAU,iCAAmC,GACzFC,EAAuBD,EAAM,EAAI,EAGnCG,iGAIIH,EAAK,GAAG,UACRA,EAAK,UAAU,kBAAkB,YAChC,IAAM,CACZA,EAAK,UAAU,yBAA2B,GAC1CA,EAAK,UAAU,+BAAiC,EACjD,CAAA,aACQ,IAAM,CACbA,EAAK,UAAU,yBAA2B,GAC1CA,EAAK,UAAU,+BAAiC,EAAA,CACjD,sBACiBL,EAAgBK,EAAK,UAAU,cAAc,CAAC,2BACzCH,GAAsB,KAKtCW,EAAqBR,GACzBG,WAEDM,CAAuB,uBAEbX,EAAoBE,EAAK,UAAU,cAAc,CAAC,uEAE1DM,EAAkBN,CAAI,CAAC,+FAKbA,EAAK,MAAM,UACdA,EAAK,GAAG,YACNA,EAAK,KAAK,sBACDL,EAAgBK,EAAK,UAAU,cAAc,CAAC,2BACzCH,GAAsB,MAE7CI,EAAuBD,CAAI,CAAC,eAMzBU,EAAmBV,GACvBG,6CAEsBV,EAAiBO,EAAK,UAAU,CAAC,UACnDA,EAAK,GAAG,UACTW,EAAUX,EAAK,GAAG,CAAC,aAChBW,EAAUX,EAAK,MAAM,CAAC,YACvBW,EAAUX,EAAK,KAAK,CAAC,0BACPW,EAAUX,EAAK,kBAAkB,CAAC,mBACzCW,EAAUX,EAAK,WAAW,CAAC,cAChCW,EAAUX,EAAK,OAAO,CAAC"}