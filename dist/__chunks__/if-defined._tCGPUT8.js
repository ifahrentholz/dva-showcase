import{T as u}from"./lit-element.XkUWx5ik.js";class C{constructor(){this.runtimeCache=new Map}get(e){return this.runtimeCache.get(e)}set(e,t){this.runtimeCache.set(e,t)}has(e){return this.runtimeCache.has(e)}delete(e){this.runtimeCache.delete(e)}}class l{constructor(){this.requestPipeline=new Map,this.runtimeCache=new C}fetchJson(e,t={}){return this.fetchData(this.getCodeBasePath(e),t,this.getResponseJSON)}fetchText(e,t={}){return this.fetchData(this.getCodeBasePath(e),t,this.getResponseText)}async fetchData(e,t,s){const{cacheOptions:r}=t,a=this.getCachedData(e,r);if(a!==null)return a;const i=this.requestPipeline.get(e);if(i!==void 0)return s(await i);const h=fetch(e,t.fetchOptions);this.requestPipeline.set(e,h);const o=await h;this.requestPipeline.delete(e);const c=await s(o);return this.setCachedData(e,c,r),c}async getResponseJSON(e){return await e.clone().json()}async getResponseText(e){return await e.clone().text()}getCachedData(e,t){return(t==null?void 0:t.cacheType)==="runtime"?this.runtimeCache.get(e)??null:null}setCachedData(e,t,s){(s==null?void 0:s.cacheType)==="runtime"&&this.runtimeCache.set(e,t)}getCodeBasePath(e){const t=e.startsWith("/")?e:`/${e}`;return`${window.hlx.codeBasePath}${t}`}}const d=new l;/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const g=n=>n??u;export{d as F,g as o};
//# sourceMappingURL=if-defined._tCGPUT8.js.map
