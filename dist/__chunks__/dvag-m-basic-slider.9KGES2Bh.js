import{U as F,N as H,M as u,R as c,S as X}from"./component.module.D5fmAfIh.js";import{f as V,l as j,d as Q,e as N,a as y,r as m,g as Y}from"./index.module.BEmWgxQc.js";import{V as C,b as P,D as B}from"./cssClasses.CIN72OsW.js";import{m as L}from"./mediaQueries.0eOxrCUs.js";import{C as J,S as Z,M as ee,O as te,I as se}from"./eventTypes.voneREpA.js";import{L as ie}from"./LazyConnectService.yBR27czX.js";var _={exports:{}},W=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof window.msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto);if(W){var R=new Uint8Array(16);_.exports=function(){return W(R),R}}else{var K=new Array(16);_.exports=function(){for(var e=0,s;e<16;e++)e&3||(s=Math.random()*4294967296),K[e]=s>>>((e&3)<<3)&255;return K}}var G=_.exports,q=[];for(var I=0;I<256;++I)q[I]=(I+256).toString(16).substr(1);function re(t,e){var s=e||0,i=q;return[i[t[s++]],i[t[s++]],i[t[s++]],i[t[s++]],"-",i[t[s++]],i[t[s++]],"-",i[t[s++]],i[t[s++]],"-",i[t[s++]],i[t[s++]],"-",i[t[s++]],i[t[s++]],i[t[s++]],i[t[s++]],i[t[s++]],i[t[s++]]].join("")}var U=re,ae=G,ne=U,$,M,x=0,k=0;function le(t,e,s){var i=e&&s||0,r=e||[];t=t||{};var a=t.node||$,o=t.clockseq!==void 0?t.clockseq:M;if(a==null||o==null){var d=ae();a==null&&(a=$=[d[0]|1,d[1],d[2],d[3],d[4],d[5]]),o==null&&(o=M=(d[6]<<8|d[7])&16383)}var h=t.msecs!==void 0?t.msecs:new Date().getTime(),f=t.nsecs!==void 0?t.nsecs:k+1,D=h-x+(f-k)/1e4;if(D<0&&t.clockseq===void 0&&(o=o+1&16383),(D<0||h>x)&&t.nsecs===void 0&&(f=0),f>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");x=h,k=f,M=o,h+=122192928e5;var p=((h&268435455)*1e4+f)%4294967296;r[i++]=p>>>24&255,r[i++]=p>>>16&255,r[i++]=p>>>8&255,r[i++]=p&255;var b=h/4294967296*1e4&268435455;r[i++]=b>>>8&255,r[i++]=b&255,r[i++]=b>>>24&15|16,r[i++]=b>>>16&255,r[i++]=o>>>8|128,r[i++]=o&255;for(var S=0;S<6;++S)r[i+S]=a[S];return e||ne(r)}var oe=le,ce=G,de=U;function he(t,e,s){var i=e&&s||0;typeof t=="string"&&(e=t==="binary"?new Array(16):null,t=null),t=t||{};var r=t.random||(t.rng||ce)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e)for(var a=0;a<16;++a)e[i+a]=r[a];return e||de(r)}var ve=he,fe=oe,z=ve,T=z;T.v1=fe;T.v4=z;var ge=T;class g{constructor(){this.intersectionObserverMap=new Map,this.rootElementKeyMap=new WeakMap}getIObserverData(e={}){const s=this.getIObserverKey(e),i=this.intersectionObserverMap.get(s);return i!==void 0?i:{iObserverInstance:new IntersectionObserver(r=>this.handleVPChange(r,s),e),callbackMap:new WeakMap}}getIObserverKey(e){return JSON.stringify(this.getSerializableObserverConfig(e))}getSerializableObserverConfig(e){return e.root===void 0||e.root===null?e:{...e,root:this.getRootElementKey(e.root)}}getRootElementKey(e){const s=this.rootElementKeyMap.get(e);if(s!==void 0)return s;const i=ge.v4();return this.rootElementKeyMap.set(e,i),i}static removeCallback(e,s){return e.filter(i=>i.type!==s.type||i.callback.toString()!==s.callback.toString()||i.context!==s.context)}static callbackExists(e,s){return e.find(i=>i.type===s.type&&i.callback.toString()===s.callback.toString()&&i.context===s.context)!==void 0}observe(e,s,i={}){const r=this.getIObserverData(i),a=r.callbackMap.get(e)||[];g.callbackExists(a,s)||(a.push(s),r.callbackMap.set(e,a),this.intersectionObserverMap.set(this.getIObserverKey(i),r),r.iObserverInstance.observe(e))}observeIn({targetElement:e,callback:s,context:i,observerConfig:r={}}){this.observe(e,{type:"in",callback:s,context:i},r)}unobserveIn({targetElement:e,callback:s,context:i,observerConfig:r={}}){this.unobserve(e,{type:"in",callback:s,context:i},r)}observeOut({targetElement:e,callback:s,context:i,observerConfig:r={}}){this.observe(e,{type:"out",callback:s,context:i},r)}unobserveOut({targetElement:e,callback:s,context:i,observerConfig:r={}}){this.unobserve(e,{type:"out",callback:s,context:i},r)}observeBoth({targetElement:e,callback:s,context:i,observerConfig:r={}}){this.observe(e,{type:"both",callback:s,context:i},r)}unobserveBoth({targetElement:e,callback:s,context:i,observerConfig:r={}}){this.unobserve(e,{type:"both",callback:s,context:i},r)}unobserve(e,s,i={}){const r=this.getIObserverData(i);let a=r.callbackMap.get(e)||[];g.callbackExists(a,s)!==!1&&(a=g.removeCallback(a,s),r.callbackMap.set(e,a),this.intersectionObserverMap.set(this.getIObserverKey(i),r),r.iObserverInstance.unobserve(e))}handleVPChange(e,s){e.forEach(i=>{const r=i.target,a=this.intersectionObserverMap.get(s);if(a===void 0)return;const o=a.callbackMap.get(r);o!==void 0&&this.fireCallbacks(o,i.isIntersecting)})}fireCallbacks(e,s){const i=["both",s?"in":"out"];e.filter(a=>i.includes(a.type)).forEach(a=>{a.callback.bind(a.context)()})}}const v=new g;class ue{constructor(){this.observerMap=new Map}observe(e,s){const i=this.getCallbacks(e);i.add(s),this.observerMap.set(e,i)}unobserve(e,s){const i=this.getCallbacks(e);i.delete(s),this.observerMap.set(e,i)}notifyObservers(e,s){this.getCallbacks(e).forEach(r=>r(s))}getCallbacks(e){return this.observerMap.get(e)||new Set}}const w=new ue;class pe{constructor(){var e,s;(s=(e=window.Granite)==null?void 0:e.author)!=null&&s.MessageChannel&&this.subscribeToMessageChannel()}subscribeToMessageChannel(){new window.Granite.author.MessageChannel("cqauthor",window).subscribeRequestMessage("cmp.panelcontainer",e=>this.handleMessage(e))}handleMessage(e){e.data!==void 0&&w.notifyObservers(this.getObserverKey(e.data.type),e.data)}observeMessages(e,s){w.observe(this.getObserverKey(e),s)}unobserveMessages(e,s){w.unobserve(this.getObserverKey(e),s)}getObserverKey(e){return`dvag-panelcontainer-${e}`}}const be=new pe,E=(t,e=100)=>{let s;return new Promise(i=>{t.addEventListener("scroll",()=>{s!==void 0&&(clearTimeout(s),s=setTimeout(()=>i(!0),e))}),s=setTimeout(()=>i(!0),e)})};class Se{constructor(){this.observedItemsMap=new Map,window.addEventListener("storage",e=>this.handleStorageChange(e))}addItem(e,s){localStorage.setItem(e,s),this.fireCallbacks(e)}getItem(e){return localStorage.getItem(e)}removeItem(e,s={}){this.getStorage(s).removeItem(e)}observeItem(e,s){const i=this.getKeyCallbacks(e);i.add(s),this.observedItemsMap.set(e,i)}unobserveItem(e,s){const i=this.getKeyCallbacks(e);i.delete(s),this.observedItemsMap.set(e,i)}handleStorageChange(e){const s=e.key,i=e.oldValue,r=e.newValue;s===null||i===r||!this.observedItemsMap.has(s)||this.fireCallbacks(s)}getKeyCallbacks(e){return this.observedItemsMap.get(e)||new Set}fireCallbacks(e){this.getKeyCallbacks(e).forEach(i=>i())}getStorage(e){const{useSessionStorage:s=!1}=e;return s?sessionStorage:localStorage}}const O=new Se;class ye{constructor(){this.consentCategories=new Set,window._dvaConsentManagementService=this,document.body.dispatchEvent(new CustomEvent(J))}setConsent(e,s){return this.consentCategories.add(e),O.addItem(this.getStorageKey(e),s.toString())}getConsent(e){return this.consentCategories.add(e),O.getItem(this.getStorageKey(e))==="true"}getAllCategories(){return Array.from(this.consentCategories)}observeCategory(e,s){O.observeItem(this.getStorageKey(e),s)}unobserveCategory(e,s){O.unobserveItem(this.getStorageKey(e),s)}getStorageKey(e){return`dva-consent-${e}`}}const me=new ye;class A{static get ANALYTICS_CONSENT_CAT_NAME(){return"adobe-analytics"}constructor(){this.pageContainer=V(document.body,".dva-page")||V(document.body,".page.container")||document.body}dispatch(e){me.getConsent(A.ANALYTICS_CONSENT_CAT_NAME)&&this.pageContainer.dispatchEvent(new CustomEvent(e.eventName,{detail:this.prepareTrackingEvent(e.eventDetails)}))}prepareTrackingEvent(e){return{timestamp:new Date().getTime(),pageUrl:window.location.href,...e}}}const Ce=new A;var Ie=Object.defineProperty,Oe=Object.getOwnPropertyDescriptor,l=(t,e,s,i)=>{for(var r=i>1?void 0:i?Oe(e,s):e,a=t.length-1,o;a>=0;a--)(o=t[a])&&(r=(i?o(e,s,r):o(r))||r);return i&&r&&Ie(e,s,r),r};let n=class extends F{constructor(){super(...arguments),this.viewportObserver=j.getInstance(),this._inDraggingMode=!1,this.initialDragOffset=0,this.lastScrollIndicatorOffset=0,this._activeSlideIdx=0,this.activeSlideMap=new WeakMap,this.mqService=Q.getInstance(L),this.autoplayInterval=null}get autoplay(){return this.hasAttribute("autoplay")&&this.getAttribute("autoplay")!=="false"}get autoplayDelay(){return parseInt(this.getAttribute("autoplay-delay")||"2000",10)}get activeSlideIdx(){return this._activeSlideIdx}set activeSlideIdx(t){t<0||t>=this.slides.length||(this._activeSlideIdx=t)}get firstActiveSlide(){const t=this.slides.filter(e=>this.activeSlideMap.get(e)===!0);return t.length===0?null:t[0]}get firstSlideVisible(){return this._firstSlideVisible}set firstSlideVisible(t){this._firstSlideVisible!==t&&(N(this.prevBtn,C,!t),this._firstSlideVisible=t,this.updateSliderActive())}get lastSlideVisible(){return this._lastSlideVisible}set lastSlideVisible(t){this._lastSlideVisible!==t&&(N(this.nextBtn,C,!t),this._lastSlideVisible=t,this.updateSliderActive())}async updateSliderActive(){await E(this.slidesContainer),this.firstSlideVisible===!0&&this.lastSlideVisible===!0?y(this,P):m(this,P)}afterComponentRender(){this.viewportObserver.observe(this),ie.subscribe(this,()=>{this.setScrollIndicatorWidth(),this.initControls(),this.initActiveSlideObserver(),this.initEditMode()})}initEditMode(){be.observeMessages("cmp-carousel",t=>this.handlePanelcontainerMessage(t))}handlePanelcontainerMessage(t){let e=this.dataset.cmpPanelcontainerId;if(e===void 0){const s=Y(this,".cmp-carousel");e=(s==null?void 0:s.dataset.cmpPanelcontainerId)||void 0}t.id===e&&(m(this.slides,"cmp-carousel__item--active"),y(this.slides[t.index],"cmp-carousel__item--active"),this.goToSlide(t.index))}setScrollIndicatorWidth(){const t=this.slidesContainer.offsetWidth/this.slidesContainer.scrollWidth;this.scrollIndicator&&(this.scrollIndicator.style.width=`${t*100}%`)}initControls(){this.slides.length!==0&&this.initItemObserver()}initItemObserver(){const t=this.slides[0];v.observeIn({targetElement:t,callback:()=>this.firstSlideVisible=!0,context:this,observerConfig:this.vpObserverConfig}),v.observeOut({targetElement:t,callback:()=>this.firstSlideVisible=!1,context:this,observerConfig:this.vpObserverConfig});const e=this.slides[this.slides.length-1];v.observeIn({targetElement:e,callback:()=>this.lastSlideVisible=!0,context:this,observerConfig:this.vpObserverConfig}),v.observeOut({targetElement:e,callback:()=>this.lastSlideVisible=!1,context:this,observerConfig:this.vpObserverConfig})}handleFirstSlideInVp(){m(this.prevBtn,C)}handleFirstSlideOutVp(){y(this.prevBtn,C)}initActiveSlideObserver(){this.slides.forEach(t=>{v.observeIn({targetElement:t,callback:()=>this.handleSlideInVp(t),context:this,observerConfig:this.vpObserverConfig}),v.observeOut({targetElement:t,callback:()=>this.handleSlideOutVp(t),context:this,observerConfig:this.vpObserverConfig})})}handleSlideInVp(t){this.activeSlideMap.set(t,!0),this.updateActiveSlide()}handleSlideOutVp(t){this.activeSlideMap.set(t,!1),this.updateActiveSlide()}updateActiveSlide(){this.activeSlideIdx!==this.slides.findIndex(t=>this.activeSlideMap.get(t)===!0)&&(this.activeSlideIdx=this.slides.findIndex(t=>this.activeSlideMap.get(t)===!0),this.dispatchSlideChangedEvent())}async dispatchSlideChangedEvent(){await E(this.slidesContainer);const t={slidesTotal:this.slides.length,currentSlide:this.activeSlideIdx,target:this,interactionType:this.lastInteractionType||"",autoplay:this.autoplay};Ce.dispatch({eventName:Z,eventDetails:t})}get vpObserverConfig(){return{rootMargin:"0px -100px",root:this.slidesContainer}}get inDraggingMode(){return this._inDraggingMode}set inDraggingMode(t){t!==this.inDraggingMode&&(this._inDraggingMode=t)}get currentScrollIndicatorOffset(){return this.scrollIndicator?this.scrollIndicator.getBoundingClientRect().left:0}goToSlide(t){if(this.slides.length<=t)return;const e=this.slides[t].offsetLeft;this.moveSliderTo(e)}async moveSliderTo(t){this.slidesContainer.scrollTo({left:t,behavior:"smooth"}),await E(this.slidesContainer)}destroyComponent(){this.activeSlideMap=new WeakMap}handleMQChange(){this.setScrollIndicatorWidth(),this.handleSlidesContainerScroll(),this.updateSliderActive()}handlePrevBtnClick(){this.lastInteractionType="click",this.moveSliderTo(this.slidesContainer.scrollLeft-this.slidesContainer.offsetWidth),this.stopAutoPlay()}handleNextBtnClick(){this.lastInteractionType="click",this.moveSliderTo(this.slidesContainer.scrollLeft+this.slidesContainer.offsetWidth),this.stopAutoPlay()}async handleScrollBarClick(t){if(t.target===this.scrollIndicator)return;const e=(t.pageX-this.scrollBar.getBoundingClientRect().left)/this.scrollBar.offsetWidth;await this.moveSliderTo(e*this.slidesContainer.scrollWidth),this.healSliderPosition()}handleDragStart(t){this.initialDragOffset=t.pageX+this.scrollBar.getBoundingClientRect().left,this.inDraggingMode=!0,y(this,B),this.lastScrollIndicatorOffset=this.currentScrollIndicatorOffset}handleDragMove(t){if(this.inDraggingMode===!1)return;this.lastInteractionType="dragScrollIndicator";const e=this.getRelativeScrollIndicatorOffset(t.pageX);this.updateScrollIndicatorOffset(e),this.updateSlidesContainerOffset(e)}async handleDragEnd(){this.inDraggingMode!==!1&&(this.inDraggingMode=!1,this.lastScrollIndicatorOffset=this.currentScrollIndicatorOffset,await this.healSliderPosition(),m(this,B))}async healSliderPosition(){const t=this.firstActiveSlide;t!==null&&await this.moveSliderTo(t.offsetLeft)}handleSlidesContainerScroll(){if(this.inDraggingMode===!0)return;const t=this.getRelativeScrollContainerOffset();this.updateScrollIndicatorOffset(t),this.lastScrollIndicatorOffset=this.currentScrollIndicatorOffset}updateScrollIndicatorOffset(t){this.scrollIndicator&&(this.scrollIndicator.style.transform=`translateX(${this.getScrollIndicatorOffset(t)}%)`)}getScrollIndicatorOffset(t){return!this.scrollIndicator||t===0?0:t*this.scrollBar.offsetWidth/this.scrollIndicator.offsetWidth}updateSlidesContainerOffset(t){this.slidesContainer.scrollLeft=this.getSlidesContainerOffset(t)}getSlidesContainerOffset(t){return t!==0&&(t/=100),t*this.slidesContainer.scrollWidth}handleTouchMove(){this.stopAutoPlay(),this.lastInteractionType="swipe"}stopAutoPlay(){this.autoplayInterval&&(clearInterval(this.autoplayInterval),this.autoplayInterval=null)}detectHorizontalScrolling(t){t.deltaX!==0&&(this.lastInteractionType="swipe",this.stopAutoPlay())}startAutoplay(){this.autoplay&&(this.lastInteractionType="autoplay",this.startSliderAutoPlayInterval())}startSliderAutoPlayInterval(){this.autoplayInterval===null&&(this.autoplayInterval=setInterval(()=>{this.moveOneSlide(1)},this.autoplayDelay))}moveOneSlide(t){this.goToSlide(this.activeSlideIdx+t)}getRelativeScrollContainerOffset(){return this.slidesContainer.scrollLeft/this.slidesContainer.scrollWidth*100}getRelativeScrollIndicatorOffset(t){if(!this.scrollIndicator)return 0;let e=t-this.initialDragOffset+this.lastScrollIndicatorOffset;return e<0?0:(e+this.scrollIndicator.offsetWidth>this.scrollBar.offsetWidth&&(e=this.scrollBar.offsetWidth-this.scrollIndicator.offsetWidth),e/this.scrollBar.offsetWidth*100)}};l([H(".dvag-m-basic-slider__slide")],n.prototype,"slides",2);l([u(".dvag-m-basic-slider__slides")],n.prototype,"slidesContainer",2);l([u(".dvag-m-basic-slider__scroll-bar")],n.prototype,"scrollBar",2);l([u(".dvag-m-basic-slider__scroll-indicator")],n.prototype,"scrollIndicator",2);l([u(".dvag-m-basic-slider__nav-button--prev")],n.prototype,"prevBtn",2);l([u(".dvag-m-basic-slider__nav-button--next")],n.prototype,"nextBtn",2);l([c("window",ee)],n.prototype,"handleMQChange",1);l([c("prevBtn","click")],n.prototype,"handlePrevBtnClick",1);l([c("nextBtn","click")],n.prototype,"handleNextBtnClick",1);l([c("scrollBar","click")],n.prototype,"handleScrollBarClick",1);l([c("scrollIndicator","mousedown")],n.prototype,"handleDragStart",1);l([c("window","mousemove")],n.prototype,"handleDragMove",1);l([c("window","mouseup")],n.prototype,"handleDragEnd",1);l([c("slidesContainer","scroll")],n.prototype,"handleSlidesContainerScroll",1);l([c("slidesContainer","touchmove")],n.prototype,"handleTouchMove",1);l([c("this",te)],n.prototype,"stopAutoPlay",1);l([c("slidesContainer","wheel")],n.prototype,"detectHorizontalScrolling",1);l([c("this",se)],n.prototype,"startAutoplay",1);n=l([X(L)],n);customElements.define("dvag-m-basic-slider",n);export{n as D,ge as u,E as w};
//# sourceMappingURL=dvag-m-basic-slider.9KGES2Bh.js.map
