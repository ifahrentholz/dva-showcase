{"version":3,"file":"vb-stage.js","sources":["../../src/components/dva-e-lazy-video/dva-e-lazy-video.template.ts","../../src/components/dva-e-lazy-video/dva-e-lazy-video.ts","../../src/components/dva-m-rating-box/dva-m-rating-box.template.ts","../../src/components/dva-m-rating-box/dva-m-rating-box.ts","../../src/components/dvag-m-c04-vb-stage/dvag-m-c04-vb-stage.ts","../../src/blocks/vb-stage/vb-stage.ts"],"sourcesContent":["type TemplateParameter = {\n  sources: Map<string, MQDef>;\n};\n\ntype MQDef = {\n  sources: Array<HTMLElement>;\n  mqs: number[];\n  fallbackSrc?: string;\n};\n\nconst getFallbackImg = (mq: MQDef): string => {\n  if (mq.fallbackSrc !== undefined && mq.fallbackSrc !== \"undefined\") {\n    return mq.fallbackSrc;\n  }\n\n  return \"\";\n};\n\nconst renderVideos = (mqSources: Map<string, MQDef>) => {\n  let markup = \"\";\n  mqSources.forEach((mq: MQDef) => {\n    markup += `<video class=\"dva-e-lazy-video__video dva-js-lazy-video__video\"\n                      autoplay muted loop playsinline\n                      poster=\"${getFallbackImg(mq)}\">`;\n    mq.sources.forEach((sourceTag: HTMLElement) => {\n      const test = sourceTag.outerHTML;\n      markup += test;\n    });\n    markup += \"</video>\";\n  });\n  return markup;\n};\n\nexport const template = (args: TemplateParameter) => {\n  return `${renderVideos(args.sources)}`;\n};\n","import { Component, MQBasedRendered } from \"@kluntje/core\";\nimport { ViewportObserver } from \"@kluntje/services\";\nimport { removeEvent, addClass, findAll, onEvent, removeClass, getCurrentMQ } from \"@kluntje/js-utils/lib/dom-helpers\";\nimport { LOADED, INITIALIZED, IN_VIEWPORT } from \"Constants/cssClasses\";\nimport { removeAllBS } from \"@kluntje/js-utils/lib/string-helpers\";\nimport { pushIfNew, hasElement } from \"@kluntje/js-utils/lib/array-helpers\";\nimport mqDefinitions from \"Config/mediaQueries\";\nimport { IN_VIEWPORT_EVENT, MQ_CHANGE_EVENT } from \"Constants/eventTypes\";\n\nimport { template } from \"./dva-e-lazy-video.template\";\n\ntype MQDef = {\n  sources: Array<HTMLElement>;\n  mqs: number[];\n};\n\n@MQBasedRendered(mqDefinitions)\nclass DvaLazyVideo extends Component {\n  viewportObserver = ViewportObserver.getInstance();\n  videoSources?: Map<string, MQDef>;\n\n  constructor() {\n    super({\n      ui: {\n        video: \".dva-js-lazy-video__video\",\n      },\n      events: [\n        {\n          event: IN_VIEWPORT_EVENT,\n          target: \"this\",\n          handler: \"handleIntersectionChange\",\n        },\n        {\n          event: MQ_CHANGE_EVENT,\n          target: \"window\",\n          handler: \"handleMQChange\",\n        },\n        {\n          event: \"beforeunload\",\n          target: \"window\",\n          handler: \"unloadVideo\",\n        },\n        {\n          event: \"pageshow\",\n          target: \"window\",\n          handler: \"handleVideoLoad\",\n        },\n      ],\n      initialStates: {\n        activeRendition: null,\n      },\n      reactions: {\n        activeRendition: [\"loadVideo\"],\n      },\n    });\n  }\n\n  /**\n   * Lifecycle-Hook: Returns Rendering Template\n   * @returns {string}\n   */\n  renderingTemplate(): string {\n    return template({ sources: this.sources });\n  }\n\n  /**\n   * Lifecycle-Hook: Initializes Component after render\n   * @override\n   */\n  afterComponentRender(): void {\n    this.viewportObserver.observe(this);\n  }\n\n  /**\n   * Returns Map containing all Sources strutured\n   * by MQs\n   * @returns {Map<String, MQDef>}\n   */\n  get sources(): Map<string, MQDef> {\n    // if video-Sources-Map was created before, return it\n    if (this.videoSources) {\n      return this.videoSources;\n    }\n\n    const sourceNodes = findAll(this, \"source\");\n    const sources = new Map();\n\n    sourceNodes.forEach((sourceNode: HTMLElement) => {\n      let currentMq = sourceNode.dataset.dvaMq;\n      if (currentMq === undefined) {\n        currentMq = \"1-5\";\n      }\n\n      if (sources.has(currentMq)) {\n        const mqDef = sources.get(currentMq);\n        mqDef.sources.push(sourceNode);\n        sources.set(currentMq, mqDef);\n      } else {\n        sources.set(currentMq, {\n          sources: [sourceNode],\n          mqs: this.getMQs(currentMq),\n        });\n      }\n    });\n\n    const fallbackImgs = findAll(this, \"img\");\n\n    fallbackImgs.forEach((fallbackImg: HTMLElement) => {\n      let currentMq = fallbackImg.dataset.dvaMq;\n      if (currentMq === undefined) {\n        currentMq = \"1-5\";\n      }\n\n      const fallbackSrc = fallbackImg.dataset.src;\n\n      if (sources.has(currentMq) && fallbackSrc !== undefined) {\n        const mqDef = sources.get(currentMq);\n        mqDef.fallbackSrc = fallbackSrc;\n        sources.set(currentMq, mqDef);\n      }\n    });\n\n    this.videoSources = sources;\n    return sources;\n  }\n\n  /**\n   * Returns index of the Video (SourceSet) that should be\n   * active on the current mq\n   * @returns {number}\n   */\n  get activeVideo(): number {\n    const currentMQ = parseInt(getCurrentMQ(mqDefinitions).slice(2), 10);\n    const foundVideos: number[] = [];\n    let idx = 0;\n\n    this.sources.forEach((mqDef: MQDef) => {\n      if (hasElement(mqDef.mqs, currentMQ)) {\n        foundVideos.push(idx);\n      }\n      idx += 1;\n    });\n    return foundVideos.length ? foundVideos[0] : 0;\n  }\n\n  /**\n   * Handles Intersection Change, by removing viewportObserver\n   * and initializing ImageLoad\n   */\n  handleIntersectionChange(): void {\n    this.viewportObserver.unobserve(this);\n    addClass(this, IN_VIEWPORT);\n    removeEvent(this, IN_VIEWPORT_EVENT, this.handleIntersectionChange, this);\n    this.setState({ activeRendition: this.activeVideo });\n  }\n\n  /**\n   * Handles MQ-Change, by setting activeRendition-State\n   */\n  handleMQChange(): void {\n    this.setState({ activeRendition: this.activeVideo });\n  }\n\n  /**\n   * Finishes loading, by displaying video and removing loading layer\n   *\n   * @param {Event} e\n   */\n  handleVideoLoad(e: any): void {\n    removeEvent(e.target, \"loadeddata\", this.handleVideoLoad, this);\n    addClass(this, LOADED);\n    addClass(this, INITIALIZED);\n    addClass(this.ui.video[this.state.activeRendition], LOADED);\n  }\n\n  /**\n   * Handles Video-Loading-Error, by making poster visible\n   *\n   * @param {Event} e\n   */\n  handleVideoLoadingError(e: any): void {\n    removeEvent(e.target, \"error\", this.handleVideoLoadingError, this);\n    const currentVideo = this.ui.video[this.state.activeRendition];\n\n    addClass(this, LOADED);\n    addClass(this, INITIALIZED);\n    addClass(currentVideo, LOADED);\n  }\n\n  /**\n   * Loads Active Rendition of Video by loading its sources\n   */\n  loadVideo(): void {\n    if (this.ui.video.length <= this.state.activeRendition) return;\n\n    // unload loaded Rendition and show loading-layer\n    this.unloadVideo();\n\n    const currentVideo = this.ui.video[this.state.activeRendition];\n    const currentSources = findAll(currentVideo, \"source\");\n\n    onEvent(currentVideo, \"loadeddata\", this.handleVideoLoad, this);\n    onEvent(currentSources[currentSources.length - 1], \"error\", this.handleVideoLoadingError, this);\n\n    // add src-Attributes to allow loading\n    currentSources.forEach((source: HTMLElement) => {\n      const currentSrc = source.dataset.src;\n      if (currentSrc !== undefined) {\n        source.setAttribute(\"src\", currentSrc);\n      }\n    });\n\n    // load Video\n    currentVideo.load();\n  }\n\n  /**\n   *  Remove all loaded indicating classes to show loading layer\n   */\n  unloadVideo(): void {\n    // remove all loaded indicating classes to show loading layer\n    removeClass(this.ui.video, LOADED);\n    removeClass(this, LOADED);\n    removeClass(this, INITIALIZED);\n  }\n\n  /**\n   * Returns Array of MQs for given MQDef\n   * @param {string} mqDefs - string describing a Range of Mq (eg '1-3', '1,2,4', '5')\n   * @returns {number[]}\n   */\n  getMQs(mqDefs: string): number[] {\n    let mqs: number[] = [];\n    removeAllBS(mqDefs)\n      .split(\",\")\n      .forEach((mqDef: string) => {\n        if (mqDef.length === 1) {\n          mqs = pushIfNew(mqs, parseInt(mqDef, 10));\n        } else if (mqDef.length > 1) {\n          const mqRange = mqDef.split(\"-\");\n          const mqRangeStart = parseInt(mqRange[0], 10);\n          const mqRangeEnd = parseInt(mqRange[1], 10);\n          for (let mq = mqRangeStart; mq <= mqRangeEnd; mq++) {\n            mqs = pushIfNew(mqs, mq);\n          }\n        }\n      });\n    return mqs;\n  }\n}\n\ncustomElements.define(\"dva-e-lazy-video\", DvaLazyVideo);\n","import { html } from \"lit-html\";\n\nimport { DvaRatingBox } from \"./dva-m-rating-box\";\n\ntype FilledOptions = \"no\" | \"half\" | \"full\";\n\nconst renderRatingStar = (filled: FilledOptions, starIdx: number, ratingBox: DvaRatingBox) => {\n  return html`\n    <dva-e-icon\n      class=\"dva-e-rating-star${filled !== \"no\" ? ` dva-e-rating-star--${filled}` : \"\"}\"\n      icon-id=\"dva-icon-star\"\n      ?half-filled=${filled === \"half\"}\n      @click=${() => {\n        if (ratingBox.editMode) ratingBox.rating = starIdx + 1;\n      }}\n    ></dva-e-icon>\n  `;\n};\n\ntype RatingBoxTemplateArgs = {\n  curRating: number;\n  ratingBox: DvaRatingBox;\n};\n\n/**\n * True, if given star should be shown as Full Star\n * @param {number} rating - current rating\n * @param {number} index - index of given star\n * @returns {boolean}\n */\nconst isFullStar = (rating: number, index: number): boolean => {\n  return index + 0.5 < rating;\n};\n\n/**\n * True, if given star should be shown as Half Star\n * @param {number} rating - current rating\n * @param {number} index - index of given star\n * @returns {boolean}\n */\nconst isHalfStar = (rating: number, index: number): boolean => {\n  return index + 1 > rating && index + 0.1 <= rating;\n};\n\nconst getStarOptions = (args: RatingBoxTemplateArgs): Array<FilledOptions> => {\n  return new Array(5).fill(true).map((_value, idx) => {\n    if (isFullStar(args.curRating, idx)) return \"full\";\n    if (isHalfStar(args.curRating, idx)) return \"half\";\n    return \"no\";\n  });\n};\n\nexport const ratingBoxTemplate = (args: RatingBoxTemplateArgs) => {\n  return html`\n    <div class=\"dva-m-rating-box__ratingstar-wrapper\">\n      ${getStarOptions(args).map((filled: FilledOptions, starIdx: number) =>\n        renderRatingStar(filled, starIdx, args.ratingBox),\n      )}\n    </div>\n    <span class=\"dvag-e-form-field__error\">\n      <dva-e-icon class=\"dvag-e-form-field__error-icon\" icon-id=\"dva-icon-error-16px\"></dva-e-icon> Bitte bewerten Sie.\n    </span>\n  `;\n};\n","import { Component, prop } from \"@kluntje/core\";\nimport { ViewportObserver } from \"@kluntje/services\";\nimport { removeEvent, toggleClass } from \"@kluntje/js-utils/lib/dom-helpers\";\nimport { render } from \"lit-html\";\nimport { ERROR } from \"Constants/cssClasses\";\nimport { IN_VIEWPORT_EVENT } from \"Constants/eventTypes\";\n\nimport { ratingBoxTemplate } from \"./dva-m-rating-box.template\";\n\nexport class DvaRatingBox extends Component {\n  viewportObserver = ViewportObserver.getInstance();\n\n  @prop\n  editMode = false;\n\n  constructor() {\n    super({\n      events: [\n        {\n          event: IN_VIEWPORT_EVENT,\n          target: \"this\",\n          handler: \"handleIntersectionChange\",\n        },\n      ],\n      initialStates: {\n        loaded: false,\n        inValidationMode: false,\n      },\n      reactions: {\n        inValidationMode: [\"renderComponent\"],\n      },\n    });\n  }\n\n  static get observedAttributes() {\n    return [\"rating\"];\n  }\n\n  attributeChangedCallback(name: string, oldValue: any, newValue: any) {\n    if (name === \"rating\" && oldValue !== newValue && this.state.initialized) {\n      this.renderComponent();\n    }\n  }\n\n  afterComponentRender(): void {\n    this.viewportObserver.observe(this);\n  }\n\n  get rating() {\n    return parseFloat((this.getAttribute(\"rating\") || \"5\").replace(\",\", \".\"));\n  }\n\n  set rating(newRating: number) {\n    this.setAttribute(\"rating\", newRating.toString());\n  }\n\n  get name(): string {\n    return this.getAttribute(\"name\") || \"\";\n  }\n\n  /**\n   * Handles Intersection Change, by removing viewportObserver\n   * and initializing ImageLoad\n   */\n  handleIntersectionChange(): void {\n    this.viewportObserver.unobserve(this);\n    removeEvent(this, IN_VIEWPORT_EVENT, this.handleIntersectionChange, this);\n    if (!this.state.loaded) {\n      this.renderComponent();\n    }\n  }\n\n  /**\n   * initially renders the containing stars\n   */\n  renderComponent(): void {\n    if (this.state.inValidationMode) {\n      toggleClass(this, ERROR, this.rating === 0);\n    }\n    render(ratingBoxTemplate({ curRating: this.rating, ratingBox: this }), this);\n  }\n\n  validate() {\n    if (this.editMode) this.setState({ inValidationMode: true });\n  }\n}\n\ncustomElements.define(\"dva-m-rating-box\", DvaRatingBox);\n","import { Component, uiElement, uiEvent } from \"@kluntje/core\";\nimport { addClass, removeClass, getCurrentMQ, hasClass } from \"@kluntje/js-utils/lib/dom-helpers\";\nimport mqDefinitions from \"Config/mediaQueries\";\nimport { MQ_CHANGE_EVENT } from \"Constants/eventTypes\";\n\nexport class DvagC04VbStage extends Component {\n  @uiElement(\".dvag-m-c04-vb-stage__cta\")\n  stageCta: HTMLAnchorElement;\n\n  afterComponentRender() {\n    this.checkButtonModifier();\n    this.setButtonClass();\n  }\n\n  /**\n   * handles css-classes for CTA on no-vb-image-variant\n   */\n  checkButtonModifier(): void {\n    if (hasClass(this, \"dvag-m-c04-vb-stage--no-vb-image\")) {\n      addClass(this.stageCta, \"dva-e-button--white\");\n    }\n  }\n\n  /**\n   * handles css-classes for CTA on vb-image-variant depending on MQ\n   */\n  @uiEvent(\"window\", MQ_CHANGE_EVENT)\n  setButtonClass(): void {\n    if (hasClass(this, \"dvag-m-c04-vb-stage--no-vb-image\")) return;\n    const curMQ = getCurrentMQ(mqDefinitions);\n    if (curMQ === \"MQ4\" || curMQ === \"MQ5\") {\n      addClass(this.stageCta, \"dva-e-button--white\");\n    } else {\n      removeClass(this.stageCta, \"dva-e-button--white\");\n    }\n  }\n}\n\ncustomElements.define(\"dvag-m-c04-vb-stage\", DvagC04VbStage);\n","import \"./vb-stage.scss\";\nimport { cleanUpBlock } from \"Utils/cleanUpBlock.ts\";\nimport { html, render } from \"lit\";\nimport \"Components/dva-e-lazy-video/dva-e-lazy-video.ts\";\nimport \"Components/dva-m-rating-box/dva-m-rating-box.ts\";\nimport \"Components/dvag-m-c04-vb-stage/dvag-m-c04-vb-stage.ts\";\nimport \"Components/dva-e-lazy-image/dva-e-lazy-image.ts\";\nimport \"Components/icon/dva-e-icon.ts\";\n\ntype Stars = 0.5 | 1 | 1.5 | 2 | 2.5 | 3 | 3.5 | 4 | 4.5 | 5;\n\ninterface VBStageArgs {\n  image?: HTMLImageElement;\n  videoFallback?: HTMLImageElement;\n  videoName: string;\n  name: string;\n  description: string;\n  titel: string;\n  rating: Stars;\n  shared: number;\n  buttonLabel: string;\n}\n\nenum blockRows {\n  image,\n  videoFallback,\n  videoName,\n  name,\n  description,\n  titel,\n  rating,\n  shared,\n  buttonLabel,\n}\n\nconst getPublicVideoPath = (fileName: string) => {\n  return `${window.hlx.codeBasePath}/dist/video/${fileName}`;\n};\n\nconst template = ({ description, image, name, rating, titel, videoFallback, videoName }: VBStageArgs) => {\n  return html`\n    <div class=\"c04-vbstage dvag-h-margin-bottom--none\">\n      <dvag-m-c04-vb-stage class=\"dvag-m-c04-vb-stage \" id=\"c04-vb-stage\">\n        <div class=\"dvag-m-c04-vb-stage__background-wrapper\">\n          <dva-e-lazy-video\n            class=\"dva-e-lazy-video dva-h-preload dva-h-preload__4-3--mq-1-3 dva-h-preload__21-9--mq-4-and-up dvag-m-c04-vb-stage__background-video dva-state-invp dva-state-loaded dva-state-initialized\"\n          >\n            <video\n              class=\"dva-e-lazy-video__video dva-js-lazy-video__video\"\n              autoplay=\"\"\n              muted=\"\"\n              loop=\"\"\n              playsinline=\"\"\n              poster=\"${videoFallback?.src}\"\n            >\n              <source data-src=\"${getPublicVideoPath(videoName)}.754.564.mp4\" type=\"dist/video/mp4\" data-dva-mq=\"1-3\" />\n            </video>\n            <video\n              class=\"dva-e-lazy-video__video dva-js-lazy-video__video dva-state-loaded\"\n              autoplay=\"\"\n              muted=\"\"\n              loop=\"\"\n              playsinline=\"\"\n              poster=\"${videoFallback?.src}\"\n            >\n              <source\n                data-src=\"${getPublicVideoPath(videoName)}.1200.500.mp4\"\n                type=\"video/mp4\"\n                data-dva-mq=\"4-5\"\n                poster=\"${videoFallback?.src}\"\n              />\n            </video>\n          </dva-e-lazy-video>\n\n          <div class=\"dvag-m-c04-vb-stage__skewed-box\">\n            <div class=\"dva-h-skew--in\"></div>\n            <div class=\"dva-m-skewed-box__content\"></div>\n            <div class=\"dva-h-skew--out\"></div>\n          </div>\n        </div>\n\n        <div class=\"dvag-m-c04-vb-stage__content-wrapper\">\n          <div class=\"dvag-m-c04-vb-stage__vb-image\">\n            <div class=\"dvag-m-c04-vb-stage__vb-image-wrapper\">\n              <dva-e-lazy-image\n                class=\"dva-e-lazy-image dva-js-lazy-image dvag-m-c04-vb-stage__vb-portrait dva-state-initialized dva-state-invp dva-state-loaded\"\n                src=\"${image?.src}\"\n                alt=\"${image?.alt}\"\n                aspect-ratio=\"1:1\"\n              ></dva-e-lazy-image>\n            </div>\n          </div>\n\n          <div class=\"dvag-m-c04-vb-stage__vb-content\">\n            <div class=\"dvag-m-c04-vb-stage__vb-inner-content\">\n              <div class=\"dvag-m-c04-vb-stage__rating-wrapper\">\n                <dva-m-rating-box class=\"dva-m-rating-box\" rating=\"${rating}\">\n                  <div class=\"dva-m-rating-box__ratingstar-wrapper\"></div>\n                  <span class=\"dvag-e-form-field__error\">\n                    <dva-e-icon class=\"dvag-e-form-field__error-icon\" icon-id=\"dva-icon-error-16px\"></dva-e-icon> Bitte\n                    bewerten Sie.\n                  </span>\n                </dva-m-rating-box>\n                <p class=\"dvag-m-c04-vb-stage__rating-label\">\n                  5 von 5 Sternen<a class=\"dvag-m-c04-vb-stage__rating-link\" href=\"#\">15 Bewertungen</a>\n                </p>\n              </div>\n\n              <p class=\"dvag-m-c04-vb-stage__vb-name\">${name}</p>\n              <p class=\"dvag-m-c04-vb-stage__vb-info\">${description}</p>\n              <p class=\"dvag-m-c04-vb-stage__vb-title\">${titel}</p>\n\n              <dvag-e-c26-vb-contact-overlay-toggle\n                class=\"dvag-e-c26-vb-contact-overlay-toggle dva-e-button dva-e-button--rebrush dva-e-button--small dvag-m-c04-vb-stage__cta dva-e-button--white dva-state-active\"\n                id=\"contact_c04-vb-stage\"\n                no-cookie-hide=\"no-cookie-hide\"\n              >\n                <div class=\"dva-e-button__background\"></div>\n                <span class=\"dva-e-button__label\"> Kontakt aufnehmen </span>\n\n                <dva-e-icon class=\"dva-e-button__icon\" icon-id=\"dva-icon-contact-new\"></dva-e-icon>\n              </dvag-e-c26-vb-contact-overlay-toggle>\n            </div>\n          </div>\n        </div>\n      </dvag-m-c04-vb-stage>\n    </div>\n  `;\n};\n\nconst getChildNodeText = (element: HTMLElement, index: number): string => {\n  const childNode = element.children[index];\n  return childNode.textContent?.trim() ?? \"\";\n};\n\nconst getChildNodeInt = (element: HTMLElement, index: number): number => {\n  return parseInt(getChildNodeText(element, index), 10) || 0;\n};\n\nconst getChildNodeFloat = (element: HTMLElement, index: number): number => {\n  return parseFloat(getChildNodeText(element, index)) || 0;\n};\n\nconst getStars = (element: HTMLElement, index: number): Stars => {\n  const value = getChildNodeFloat(element, index);\n  const clampedValue = Math.min(Math.max(value, 0.5), 5);\n\n  return (Math.round(clampedValue * 2) / 2) as Stars;\n};\n\nexport default function (block: HTMLElement) {\n  const args: VBStageArgs = {\n    image: block.children[blockRows.image].querySelector(\"img\") ?? undefined,\n    videoFallback: block.children[blockRows.videoFallback].querySelector(\"img\") ?? undefined,\n    videoName: getChildNodeText(block, blockRows.videoName),\n    name: getChildNodeText(block, blockRows.name),\n    description: getChildNodeText(block, blockRows.description),\n    titel: getChildNodeText(block, blockRows.titel),\n    rating: getStars(block, blockRows.rating),\n    shared: getChildNodeInt(block, blockRows.shared),\n    buttonLabel: getChildNodeText(block, blockRows.buttonLabel),\n  };\n\n  cleanUpBlock(block);\n  render(template(args), block);\n}\n"],"names":["getFallbackImg","mq","renderVideos","mqSources","markup","sourceTag","test","template","args","DvaLazyVideo","Component","IN_VIEWPORT_EVENT","MQ_CHANGE_EVENT","ViewportObserver","sourceNodes","findAll","sources","sourceNode","currentMq","mqDef","fallbackImg","fallbackSrc","currentMQ","getCurrentMQ","mqDefinitions","foundVideos","idx","hasElement","addClass","IN_VIEWPORT","removeEvent","e","LOADED","INITIALIZED","currentVideo","currentSources","onEvent","source","currentSrc","removeClass","mqDefs","mqs","removeAllBS","pushIfNew","mqRange","mqRangeStart","mqRangeEnd","__decorateClass","MQBasedRendered","renderRatingStar","filled","starIdx","ratingBox","html","isFullStar","rating","index","isHalfStar","getStarOptions","_value","ratingBoxTemplate","DvaRatingBox","name","oldValue","newValue","newRating","toggleClass","ERROR","render","prop","DvagC04VbStage","hasClass","curMQ","uiElement","uiEvent","getPublicVideoPath","fileName","description","image","titel","videoFallback","videoName","getChildNodeText","element","_a","getChildNodeInt","getChildNodeFloat","getStars","value","clampedValue","vbStage","block","cleanUpBlock"],"mappings":"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"}