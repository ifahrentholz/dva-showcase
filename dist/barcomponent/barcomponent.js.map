{"version":3,"file":"barcomponent.js","sources":["../../src/blocks/barcomponent/barcomponent.ts"],"sourcesContent":["import { cleanUpBlock } from \"Utils/cleanUpBlock.ts\";\nimport { html, render } from \"lit\";\nimport \"./barcomponent.scss\";\nimport { renderLazyImage } from \"Components/dva-e-lazy-image/dva-e-lazy-image.template\";\n\ninterface Bar {\n  image?: HTMLImageElement;\n  header: string;\n  text: string;\n}\n\ninterface barComponentArgs {\n  subheader: string;\n  header: string;\n  buttonLabel: string;\n  bars: Bar[];\n}\n\nenum blockRows {\n  subheader,\n  header,\n  buttonLabel,\n  barImages,\n  barHeaders,\n  barTexts,\n}\n\nconst renderBars = ({ header, image, text }: Bar) => {\n  return html` <div class=\"dvag-grid-col-1-12 dvag-grid-col-3-4\">\n    <div class=\"c05-listentry\">\n      <div class=\"dvag-m-c05-list-entry\">\n        <div class=\"dvag-m-c05-list-entry__image-wrapper\">\n          ${renderLazyImage({\n            cssClasses: \"dvag-m-c05-list-entry__image\",\n            src: image?.src || \"\",\n            alt: image?.alt,\n            aspectRatio: \"cover\",\n          })}\n        </div>\n        <div class=\"dvag-m-c05-list-entry__content\">\n          <h4 class=\"dvag-m-c05-list-entry__headline\">${header}</h4>\n          <p class=\"dvag-m-c05-list-entry__text\">${text}</p>\n        </div>\n      </div>\n    </div>\n  </div>`;\n};\n\nconst template = ({ bars, buttonLabel, header, subheader }: barComponentArgs) => {\n  return html`\n    <div class=\"dvag-m-c06-page-section dvag-m-skew-component  \">\n      <div class=\"dva-h-skew--in\"></div>\n\n      <div class=\"dvag-m-skewed-box__content\">\n        <div class=\"dvag-m-section-header\">\n          <h3 class=\"dvag-m-section-header__subheadline\">${subheader}</h3>\n          <h2 class=\"dvag-m-section-header__headline\">${header}</h2>\n        </div>\n\n        <div class=\"dvag-m-c06-page-section__content-wrapper wcm-io-parsys\">\n          <div class=\"wcm-io-parsys dvag-h-margin-bottom--none\">\n            <div class=\"dvag-m-c08-barcomponent\">\n              <div class=\"dvag-grid\">\n                <div class=\"dvag-grid-row wcm-io-parsys\">${bars.map(bar => renderBars(bar))}</div>\n              </div>\n            </div>\n          </div>\n\n          <div class=\"buttons\">\n            <ul class=\"button-list bleed-m bleed-l\">\n              <li class=\"button-list-item col-s-12 col-m-4 col-l-m-4-offset col-l-4 col-l-4-offset\">\n                <a href=\"#\" class=\"dva-e-button dva-e-button--rebrush dva-e-button--small dva-state-active\">\n                  <div class=\"dva-e-button__background\"></div>\n                  <span class=\"dva-e-button__label\">${buttonLabel}</span>\n                </a>\n              </li>\n            </ul>\n          </div>\n        </div>\n\n        <div class=\"dvag-m-c06-page-section__button-wrapper\"></div>\n      </div>\n\n      <div class=\"dva-h-skew--out\"></div>\n    </div>\n  `;\n};\n\nconst getChildNodeText = (element: HTMLElement | Element, index: number): string => {\n  const childNode = element.children[index];\n  return childNode.textContent?.trim() ?? \"\";\n};\n\nconst getBars = (block: HTMLElement): Bar[] => {\n  return [...block.children[blockRows.barImages].children].map((imageRow, index) => {\n    return {\n      image: imageRow.querySelector(\"img\") || undefined,\n      header: getChildNodeText(block.children[blockRows.barHeaders], index),\n      text: getChildNodeText(block.children[blockRows.barTexts], index),\n    };\n  });\n};\n\nexport default function (block: HTMLElement) {\n  const args: barComponentArgs = {\n    subheader: getChildNodeText(block, blockRows.subheader),\n    header: getChildNodeText(block, blockRows.header),\n    buttonLabel: getChildNodeText(block, blockRows.buttonLabel),\n    bars: getBars(block),\n  };\n\n  cleanUpBlock(block);\n  render(template(args), block);\n}\n"],"names":["renderBars","header","image","text","html","renderLazyImage","template","bars","buttonLabel","subheader","bar","getChildNodeText","element","index","_a","getBars","block","imageRow","barcomponent","args","cleanUpBlock","render"],"mappings":"oVA2BA,MAAMA,EAAa,CAAC,CAAE,OAAAC,EAAQ,MAAAC,EAAO,KAAAC,KAC5BC,sKAIGC,EAAgB,CAChB,WAAY,+BACZ,KAAKH,GAAA,YAAAA,EAAO,MAAO,GACnB,IAAKA,GAAA,YAAAA,EAAO,IACZ,YAAa,OAAA,CACd,CAAC,iGAG4CD,CAAM,+CACXE,CAAI,+BAOjDG,EAAW,CAAC,CAAE,KAAAC,EAAM,YAAAC,EAAa,OAAAP,EAAQ,UAAAQ,KACtCL,2NAMkDK,CAAS,oDACZR,CAAM,6OAOHM,EAAK,IAAIG,GAAOV,EAAWU,CAAG,CAAC,CAAC,wVAUrCF,CAAW,8IAe3DG,EAAmB,CAACC,EAAgCC,IAA0B,OAE3E,QAAAC,EADWF,EAAQ,SAASC,CAAK,EACvB,cAAV,YAAAC,EAAuB,SAAU,EAC1C,EAEMC,EAAWC,GACR,CAAC,GAAGA,EAAM,SAAS,CAAA,EAAqB,QAAQ,EAAE,IAAI,CAACC,EAAUJ,KAC/D,CACL,MAAOI,EAAS,cAAc,KAAK,GAAK,OACxC,OAAQN,EAAiBK,EAAM,SAAS,CAAA,EAAuBH,CAAK,EACpE,KAAMF,EAAiBK,EAAM,SAAS,CAAA,EAAqBH,CAAK,CAAA,EAEnE,EAGH,SAAAK,EAAyBF,EAAoB,CAC3C,MAAMG,EAAyB,CAC7B,UAAWR,EAAiBK,EAAO,CAAmB,EACtD,OAAQL,EAAiBK,EAAO,CAAgB,EAChD,YAAaL,EAAiBK,EAAO,CAAqB,EAC1D,KAAMD,EAAQC,CAAK,CAAA,EAGrBI,EAAaJ,CAAK,EACXK,EAAAf,EAASa,CAAI,EAAGH,CAAK,CAC9B"}