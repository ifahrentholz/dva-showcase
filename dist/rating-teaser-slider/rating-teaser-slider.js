import{j as _,x as y}from"../__chunks__/lit-element.XkUWx5ik.js";import{u as $}from"../__chunks__/dvag-m-basic-slider.9KGES2Bh.js";import{o as D}from"../__chunks__/unsafe-html.tmuruS4o.js";import{f as I}from"../__chunks__/fetch.service.FjW5hVu3.js";import{U as x,M as o,R as d,N as O}from"../__chunks__/component.module.D5fmAfIh.js";import"../__chunks__/dva-m-rating-box.4qyCp2PZ.js";import{_ as P}from"../__chunks__/preload-helper.hlDPvxQM.js";import{h as b,r as f,w as S,m as N}from"../__chunks__/index.module.BEmWgxQc.js";import{A as p,a as C}from"../__chunks__/cssClasses.CIN72OsW.js";import{D as R}from"../__chunks__/dvag-m-basic-overlay.dnVNW-sC.js";import{c as A}from"../__chunks__/cleanUpBlock.VYQGZKWT.js";import"../__chunks__/mediaQueries.0eOxrCUs.js";import"../__chunks__/eventTypes.voneREpA.js";import"../__chunks__/LazyConnectService.yBR27czX.js";import"../__chunks__/waitForInitialization.1sUzfAAC.js";const E=(e,t)=>e.length<=t?e:`${e.slice(0,t)}...`;var L=Object.defineProperty,H=Object.getOwnPropertyDescriptor,c=(e,t,a,s)=>{for(var r=s>1?void 0:s?H(t,a):t,i=e.length-1,n;i>=0;i--)(n=e[i])&&(r=(s?n(t,a,r):n(r))||r);return s&&r&&L(t,a,r),r};class l extends x{get mainRating(){return this.ratingBox.rating.toString()}get date(){return(this.ratingDate.innerText||"").trim()}get headline(){return(this.ratingHeadline.innerText||"").trim()}get fullText(){return(this.text.innerText||"").trim()}get customerInfo(){return(this.customerInformation.innerText||"").trim()}get customerName(){return(this.customerDisplayName.innerText||"").trim()}get consultingRating(){return(this.getAttribute("consulting-rating")||"0").trim()}get satisfactionRating(){return(this.getAttribute("satisfaction-rating")||"0").trim()}get serviceRating(){return(this.getAttribute("service-rating")||"0").trim()}get vbName(){return(this.getAttribute("vb-name")||"0").trim()}get vbImage(){return(this.getAttribute("vb-image-url")||"0").trim()}get vbHomepage(){return(this.getAttribute("vb-homepage-url")||"0").trim()}get vbLocation(){return(this.getAttribute("vb-location")||"0").trim()}get teaserIdx(){return parseInt(this.getAttribute("teaser-index")||"0",10)}get hasPrevTeaser(){var t;return((t=this.parentElement)==null?void 0:t.previousElementSibling)!==null}get hasNextTeaser(){var t;return((t=this.parentElement)==null?void 0:t.nextElementSibling)!==null}get teaserData(){return{vbImg:this.vbImage,vbName:this.vbName,vbHomepage:this.vbHomepage,vbLocation:this.vbLocation,mainRating:this.mainRating,date:this.date,headline:this.headline,text:this.fullText,customerName:this.customerName,customerInfo:this.customerInfo,ratings:{consulting:this.consultingRating,satisfaction:this.satisfactionRating,service:this.serviceRating},hasPrevTeaser:this.hasPrevTeaser,hasNextTeaser:this.hasNextTeaser}}afterComponentRender(){this.convertDate()}convertDate(){const t=parseInt(this.createdDate.getAttribute("date")||"0",10),a=new Date(t),s=[{label:"Jahr",labelPlural:"Jahren",seconds:3600*24*365},{label:"Monat",labelPlural:"Monaten",seconds:3600*24*30},{label:"Woche",labelPlural:"Wochen",seconds:3600*24*7},{label:"Tag",labelPlural:"Tagen",seconds:3600*24},{label:"Stunde",labelPlural:"Stunden",seconds:3600},{label:"Minute",labelPlural:"Minuten",seconds:60},{label:"Sekunde",labelPlural:"Sekunden",seconds:1}],r=Math.floor((Date.now()-a.getTime())/1e3),i=s.find(n=>n.seconds<r);if(i!==void 0){const n=Math.floor(r/i.seconds),u=n>1?i.labelPlural:i.label;this.createdDate.innerHTML=`vor ${n} ${u}`}else this.createdDate.innerHTML=`${a.toLocaleDateString("de-DE")}`}openOverlay(t){t.preventDefault(),this.dispatchEvent(new CustomEvent("dva-open-overlay",{detail:{target:this,data:this.teaserData,teaserIdx:this.teaserIdx}}))}}c([o(".dvag-m-c01e-teaser__cta")],l.prototype,"overlayCta",2);c([o(".dva-m-rating-box")],l.prototype,"ratingBox",2);c([o(".dvag-m-c01e-teaser__rating-date")],l.prototype,"ratingDate",2);c([o(".dvag-m-c01e-teaser__headline")],l.prototype,"ratingHeadline",2);c([o(".dvag-m-c01e-teaser__full-text")],l.prototype,"text",2);c([o(".dvag-m-c01e-teaser__customer-name")],l.prototype,"customerDisplayName",2);c([o(".dvag-m-c01e-teaser__customer-information")],l.prototype,"customerInformation",2);c([o(".dvag-m-c01e-teaser__rating-date")],l.prototype,"createdDate",2);c([d("overlayCta","click")],l.prototype,"openOverlay",1);customElements.define("dvag-m-c01e-teaser",l);var M=Object.defineProperty,B=Object.getOwnPropertyDescriptor,m=(e,t,a,s)=>{for(var r=s>1?void 0:s?B(t,a):t,i=e.length-1,n;i>=0;i--)(n=e[i])&&(r=(s?n(t,a,r):n(r))||r);return s&&r&&M(t,a,r),r};class v extends x{constructor(){super({initialStates:{overlayTeaser:-1},reactions:{overlayTeaser:["renderOverlay"]}})}get lastTeaser(){return this.teasers.length-1}openOverlay({detail:t}){this.setState({overlayTeaser:t.teaserIdx})}renderOverlay({overlayTeaser:t}){if(t<-1){this.setState({overlayTeaser:-1},{silent:!0});return}if(t!==-1){if(t>this.lastTeaser){this.setState({overlayTeaser:this.lastTeaser},{silent:!0});return}this.overlay.setState({args:this.teasers[t].teaserData})}}handleOverlayNav({detail:t}){if(t.direction==="prev"&&this.state.overlayTeaser===0)return;let a=this.state.overlayTeaser+1;t.direction==="prev"&&(a-=2),this.setState({overlayTeaser:a})}handleOverlayClosed(){this.setState({overlayTeaser:-1})}}m([O(".dvag-m-c01e-teaser")],v.prototype,"teasers",2);m([o(".dvag-m-c01e-teaser-overlay")],v.prototype,"overlay",2);m([d("teasers","dva-open-overlay")],v.prototype,"openOverlay",1);m([d("overlay","dvag-m-c01e-teaser-overlay-nav")],v.prototype,"handleOverlayNav",1);m([d("overlay","dva-overlay-closed")],v.prototype,"handleOverlayClosed",1);customElements.define("dvag-m-c07-rating-teaser-slider",v);var U=Object.defineProperty,j=Object.getOwnPropertyDescriptor,h=(e,t,a,s)=>{for(var r=s>1?void 0:s?j(t,a):t,i=e.length-1,n;i>=0;i--)(n=e[i])&&(r=(s?n(t,a,r):n(r))||r);return s&&r&&U(t,a,r),r};class g extends R{constructor(){super({initialStates:{args:null},reactions:{args:["openOverlay"]},asyncRendering:!0})}get defaultArgs(){return{vbImg:"",vbName:"",vbHomepage:"",vbLocation:"",mainRating:"0",date:"",headline:"",text:"",customerName:"",customerInfo:"",ratings:{consulting:"0",satisfaction:"0",service:"0"},hasPrevTeaser:!1,hasNextTeaser:!1}}async renderAsync(){try{const t=await this.loadTemplate();_(t(this.defaultArgs),this)}catch(t){console.error("Overlay:",t)}}async loadTemplate(){const{ratingOverlayTemplate:t}=await P(()=>import("../__chunks__/dvag-m-c01e-teaser-overlay.template.rg94JRXk.js"),__vite__mapDeps([0,1,2]));return t}async openOverlay({args:t}){if(t===null)return;const a=await this.loadTemplate();_(a(t),this),!b(this,p)&&super.open()}async close(){this.setState({args:null}),f(this,C),await S(300),f(this,p),this.dispatchEvent(new CustomEvent("dva-overlay-closed",{detail:{target:this}})),super.close()}loadPrevTeaser(){this.dispatchEvent(new CustomEvent("dvag-m-c01e-teaser-overlay-nav",{detail:{target:this,direction:"prev"}}))}loadNextTeaser(){this.dispatchEvent(new CustomEvent("dvag-m-c01e-teaser-overlay-nav",{detail:{target:this,direction:"next"}}))}handleKeyup(t){switch(t.key){case"Escape":this.close();break;case"ArrowRight":b(this,p)&&this.loadNextTeaser();break;case"ArrowLeft":b(this,p)&&this.loadPrevTeaser();break}}}h([o(".dvag-m-c01e-teaser-overlay__nav-btn--prev")],g.prototype,"prevBtn",2);h([o(".dvag-m-c01e-teaser-overlay__nav-btn--next")],g.prototype,"nextBtn",2);h([d("prevBtn","click")],g.prototype,"loadPrevTeaser",1);h([d("nextBtn","click")],g.prototype,"loadNextTeaser",1);customElements.define("dvag-m-c01e-teaser-overlay",g);const F=e=>y`<div id="c07-ratingteaserslider-${e.sliderId}-slide-${e.slideIndex+1}" class="dvag-m-basic-slider__slide" aria-roledescription="slide" aria-label="${`Slide ${e.slideIndex+1} of ${e.slidesLength}`}"><dvag-m-c01e-teaser class="dvag-m-c01e-teaser" teaser-index="${e.slideIndex}" consulting-rating="${e.consultingRating}" satisfaction-rating="${e.satisfactionRating}" service-rating="${e.serviceRating}" vb-name="${e.vbName}" vb-image-url="${e.vbImageUrl}" vb-homepage-url="${e.vbHomepageUrl}" vb-location="${e.vbLocation}"><div class="dvag-m-c01e-teaser__content"><div class="dvag-m-c01e-teaser__rating-wrapper"><dva-m-rating-box class="dva-m-rating-box dvag-m-c01e-teaser__main-rating" rating="${e.rating}"></dva-m-rating-box><p class="dvag-m-c01e-teaser__rating-label">${e.rating} von 5 Sternen</p></div><h3 class="dvag-m-c01e-teaser__headline">${e.headline}</h3><p class="dvag-m-c01e-teaser__text">${E(e.text,157)}</p><p class="dvag-m-c01e-teaser__full-text">${e.text}</p><a href="#" class="dva-e-link dvag-m-c01e-teaser__cta"><span class="dva-e-link__label">Mehr erfahren</span><dva-e-icon class="dva-e-icon" icon-id="dva-icon-arrow-right-48px"></dva-e-icon></a></div><div class="dvag-m-c01e-teaser__footer"><h4 class="dvag-m-c01e-teaser__customer-label">Bewertet von:</h4><p class="dvag-m-c01e-teaser__customer-name">${e.reviewFrom}</p><p class="dvag-m-c01e-teaser__customer-info"><span class="dvag-m-c01e-teaser__rating-date" date="${e.ratingDate}">${e.ratingDate}</span>, <span class="dvag-m-c01e-teaser__customer-information">Kunde seit ${e.reviewerCustomerSince}</span></p></div></dvag-m-c01e-teaser></div>`,J=e=>y`<div class="c07-ratingteaserslider carousel dvag-h-margin-bottom--none dvag-h-margin-top--none dvag-h-background--grey dvag-h-skew--top"><dvag-m-c07-rating-teaser-slider class="dvag-m-c07-rating-teaser-slider dvag-m-skew-component cmp-carousel" id="c07-ratingteaserslider-${e.sliderId}" role="group" data-cmp-is="carousel"><div class="dva-h-skew--in"></div><div class="dvag-m-skewed-box__content"><div class="dvag-m-c07-rating-teaser-slider__grid-wrapper"><div class="dvag-m-section-header"><h3 class="dvag-m-section-header__subheadline">${e.subheadline}</h3><h2 class="dvag-m-section-header__headline">${e.headline}</h2><div class="dvag-m-section-header__text dvag-e-richtext">${D(e.text)}</div></div></div><dvag-m-basic-slider class="dvag-m-basic-slider dvag-m-teaser-slider cmp-carousel" title="Das sagen meine Kunden" id="c07-ratingteaserslider-${e.sliderId}-slider" role="group" aria-live="polite" aria-roledescription="carousel" data-cmp-is="carousel"><div class="dvag-m-basic-slider__slides">${e.slides.map(t=>F(t))}</div><div class="dvag-m-basic-slider__controls"><button class="dva-e-button dva-e-button--primary dva-e-button--rebrush dvag-m-basic-slider__nav-button dvag-m-basic-slider__nav-button--prev"><div class="dva-e-button__background"></div><dva-e-icon class="dva-e-icon" icon-id="dva-icon-chevron-left"></dva-e-icon></button> <button class="dva-e-button dva-e-button--primary dva-e-button--rebrush dvag-m-basic-slider__nav-button dvag-m-basic-slider__nav-button--next dva-state-visible"><div class="dva-e-button__background"></div><dva-e-icon class="dva-e-icon" icon-id="dva-icon-chevron-right"></dva-e-icon></button></div><div class="dvag-m-basic-slider__grid-container-wrapper"><div class="dvag-m-basic-slider__scroll-bar"><button class="dvag-m-basic-slider__scroll-indicator" tabindex="-1" style="width:19.9077%;transform:translateX(0)"></button></div></div></dvag-m-basic-slider><dvag-m-c01e-teaser-overlay class="dvag-m-c01e-teaser-overlay"></dvag-m-c01e-teaser-overlay><div class="dvag-m-c07-rating-teaser-slider__grid-wrapper"><div class="dvag-m-c07-rating-teaser-slider__button-wrapper"><a class="dva-e-button dva-e-button--rebrush" href="${e.ctaUrl}"><div class="dva-e-button__background"></div><span class="dva-e-button__label">${e.ctaLabel}</span></a></div></div></div><div class="dva-h-skew--out"></div></dvag-m-c07-rating-teaser-slider></div>`,K=(e,t)=>e.data.map((a,s)=>({sliderId:t,slideIndex:s,slidesLength:e.data.length,consultingRating:a.consultingRating,satisfactionRating:a.satisfactionRating,serviceRating:a.serviceRating,rating:a.rating,vbName:a.vbName,vbImageUrl:a.vbImageUrl,vbHomepageUrl:a.vbHomepageUrl,vbLocation:a.vbLocation,headline:a.headline,text:a.text,reviewFrom:a.reviewFrom,reviewerCustomerSince:a.reviewerCustomerSince,ratingDate:a.ratingDate}));async function ie(e){try{const t=$.v4(),a=e.children[0].textContent||"",s=e.children[1].textContent||"",r=e.children[2].innerHTML||"",i=e.children[3].textContent||"",n=await I.fetchJson(i.trim()),u=e.children[4].getElementsByTagName("a")[0],T=u.textContent||"",w=u.getAttribute("href")||"";A(e),_(J({sliderId:t,subheadline:a,headline:s,text:r,slides:K(n,t),ctaLabel:T,ctaUrl:w}),e)}catch(t){N.error("rating-teaser-slider",t)}}export{ie as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["__chunks__/dvag-m-c01e-teaser-overlay.template.rg94JRXk.js","__chunks__/lit-element.XkUWx5ik.js","__chunks__/cssClasses.CIN72OsW.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
//# sourceMappingURL=rating-teaser-slider.js.map
