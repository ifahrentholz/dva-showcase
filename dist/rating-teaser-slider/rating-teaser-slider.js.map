{"version":3,"mappings":"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","names":["truncateText","text","maxLength","DvagC01eTeaser","Component","_a","dateAsInt","date","intervals","seconds","interval","count","label","__decorateClass","uiElement","uiEvent","renderRatingStar","filled","starIdx","ratingBox","html","isFullStar","rating","index","isHalfStar","getStarOptions","args","_value","idx","ratingBoxTemplate","DvaRatingBox","IN_VIEWPORT_EVENT","ViewportObserver","name","oldValue","newValue","newRating","removeEvent","toggleClass","ERROR","render","prop","DvagC07RatingTeaserSlider","detail","overlayTeaser","nextOverlayTeaser","uiElements","scrollPosition","enableScrollLock","addClass","SCROLL_LOCK","disableScrollLock","removeClass","DebuggerService","message","DebuggerService$1","_FocusService","onEvent","target","tabableElements","trapElement","activeElement","error","_b","findAll","firstTabableElement","lastTabableElement","FocusService","FocusService$1","LightboxService","lightboxImageUrl","renderDvagBasicOverlayAsLightbox","lightboxWrapper","overlay","find","waitForInitialization","renderBasicOverlayAsLightbox","__vitePreload","LightboxService$1","DvagBasicOverlay","ANIMATING","waitFor","ACTIVE","OVERLAY_CLOSE_EVENT","OVERLAY_OPEN_EVENT","_e","DvagC01eTeaserOverlay","ratingOverlayTemplate","hasClass","ratingTeaserSlideTemplate","ratingTeaserSliderTemplate","unsafeHTML","slide","getSlidesTemplateArgs","slides","sliderId","ratingTeaserSlider","block","uuidv4","subheadline","headline","slidesEndpoint","fetchService","cta","ctaLabel","ctaUrl","cleanUpBlock"],"sources":["../../src/utils/truncateText.ts","../../src/components/dvag-m-c01e-teaser/dvag-m-c01e-teaser.ts","../../src/components/dva-m-rating-box/dva-m-rating-box.template.ts","../../src/components/dva-m-rating-box/dva-m-rating-box.ts","../../src/components/dvag-m-c07-rating-teaser-slider/dvag-m-c07-rating-teaser-slider.ts","../../src/helpers/domHelper/scrollLock.ts","../../src/services/DebuggerService.ts","../../src/services/FocusService.ts","../../src/services/LightboxService.ts","../../src/components/dvag-m-basic-overlay/dvag-m-basic-overlay.ts","../../src/components/dvag-m-c01e-teaser-overlay/dvag-m-c01e-teaser-overlay.ts","../../src/blocks/rating-teaser-slider/rating-teaser-slider.ts"],"sourcesContent":["export const truncateText = (text: string, maxLength: number): string => {\n  if (text.length <= maxLength) return text;\n  return `${text.slice(0, maxLength)}...`;\n};\n","import { Component, uiElement, uiEvent } from \"@kluntje/core\";\nimport { DvaRatingBox } from \"Components/dva-m-rating-box/dva-m-rating-box\";\n\nexport type RatingTeaserData = {\n  vbImg: string;\n  vbName: string;\n  vbHomepage: string;\n  vbLocation: string;\n  mainRating: string;\n  date: string;\n  headline: string;\n  text: string;\n  customerName: string;\n  customerInfo: string;\n  ratings: {\n    consulting: string;\n    satisfaction: string;\n    service: string;\n  };\n  hasPrevTeaser: boolean;\n  hasNextTeaser: boolean;\n};\n\nexport class DvagC01eTeaser extends Component {\n  @uiElement(\".dvag-m-c01e-teaser__cta\")\n  overlayCta: HTMLAnchorElement;\n\n  @uiElement(\".dva-m-rating-box\")\n  ratingBox: DvaRatingBox;\n\n  @uiElement(\".dvag-m-c01e-teaser__rating-date\")\n  ratingDate: HTMLSpanElement;\n\n  @uiElement(\".dvag-m-c01e-teaser__headline\")\n  ratingHeadline: HTMLHeadingElement;\n\n  @uiElement(\".dvag-m-c01e-teaser__full-text\")\n  text: HTMLParagraphElement;\n\n  @uiElement(\".dvag-m-c01e-teaser__customer-name\")\n  customerDisplayName: HTMLParagraphElement;\n\n  @uiElement(\".dvag-m-c01e-teaser__customer-information\")\n  customerInformation: HTMLSpanElement;\n\n  @uiElement(\".dvag-m-c01e-teaser__rating-date\")\n  createdDate: HTMLSpanElement;\n\n  /**\n   * Returns main rating of teaser\n   * @returns {string}\n   */\n  get mainRating(): string {\n    return this.ratingBox.rating.toString();\n  }\n\n  /**\n   * Returns date of rating\n   * @returns {string}\n   */\n  get date(): string {\n    return (this.ratingDate.innerText || \"\").trim();\n  }\n\n  /**\n   * Returns headline of rating\n   * @returns {string}\n   */\n  get headline(): string {\n    return (this.ratingHeadline.innerText || \"\").trim();\n  }\n\n  /**\n   * Returns ful text of rating\n   * @returns {string}\n   */\n  get fullText(): string {\n    return (this.text.innerText || \"\").trim();\n  }\n\n  /**\n   * Returns customer info text of rating\n   * @returns {string}\n   */\n  get customerInfo(): string {\n    return (this.customerInformation.innerText || \"\").trim();\n  }\n\n  /**\n   * Returns customer name text of rating\n   * @returns {string}\n   */\n  get customerName(): string {\n    return (this.customerDisplayName.innerText || \"\").trim();\n  }\n\n  /**\n   * Returns given consulting-rating\n   * @returns {string}\n   */\n  get consultingRating(): string {\n    return (this.getAttribute(\"consulting-rating\") || \"0\").trim();\n  }\n\n  /**\n   * Returns given satisfaction-rating\n   * @returns {string}\n   */\n  get satisfactionRating(): string {\n    return (this.getAttribute(\"satisfaction-rating\") || \"0\").trim();\n  }\n\n  /**\n   * Returns given service-rating\n   * @returns {string}\n   */\n  get serviceRating(): string {\n    return (this.getAttribute(\"service-rating\") || \"0\").trim();\n  }\n\n  /**\n   * Returns given vb-name\n   * @returns {string}\n   */\n  get vbName(): string {\n    return (this.getAttribute(\"vb-name\") || \"0\").trim();\n  }\n\n  /**\n   * Returns given vb-image-url\n   * @returns {string}\n   */\n  get vbImage(): string {\n    return (this.getAttribute(\"vb-image-url\") || \"0\").trim();\n  }\n\n  /**\n   * Returns given vb-homepage-url\n   * @returns {string}\n   */\n  get vbHomepage(): string {\n    return (this.getAttribute(\"vb-homepage-url\") || \"0\").trim();\n  }\n\n  /**\n   * Returns given vb-location\n   * @returns {string}\n   */\n  get vbLocation(): string {\n    return (this.getAttribute(\"vb-location\") || \"0\").trim();\n  }\n\n  /**\n   * Returns given teaser-index\n   * @returns {number}\n   */\n  get teaserIdx(): number {\n    return parseInt(this.getAttribute(\"teaser-index\") || \"0\", 10);\n  }\n\n  /**\n   * Tells, whether this teaser is not\n   * the first teaser in the container\n   * @returns {boolean}\n   */\n  get hasPrevTeaser(): boolean {\n    return this.parentElement?.previousElementSibling !== null;\n  }\n\n  /**\n   * Tells, whether this teaser is not\n   * the first teaser in the container\n   * @returns {boolean}\n   */\n  get hasNextTeaser(): boolean {\n    return this.parentElement?.nextElementSibling !== null;\n  }\n\n  /**\n   * Returns all information needed for the overlay\n   * @returns {RatingTeaserData}\n   */\n  get teaserData(): RatingTeaserData {\n    return {\n      vbImg: this.vbImage,\n      vbName: this.vbName,\n      vbHomepage: this.vbHomepage,\n      vbLocation: this.vbLocation,\n      mainRating: this.mainRating,\n      date: this.date,\n      headline: this.headline,\n      text: this.fullText,\n      customerName: this.customerName,\n      customerInfo: this.customerInfo,\n      ratings: {\n        consulting: this.consultingRating,\n        satisfaction: this.satisfactionRating,\n        service: this.serviceRating,\n      },\n      hasPrevTeaser: this.hasPrevTeaser,\n      hasNextTeaser: this.hasNextTeaser,\n    };\n  }\n\n  afterComponentRender(): void {\n    this.convertDate();\n  }\n\n  convertDate(): void {\n    const dateAsInt = parseInt(this.createdDate.getAttribute(\"date\") || \"0\", 10);\n    const date = new Date(dateAsInt);\n\n    const intervals = [\n      { label: \"Jahr\", labelPlural: \"Jahren\", seconds: 3600 * 24 * 365 },\n      { label: \"Monat\", labelPlural: \"Monaten\", seconds: 3600 * 24 * 30 },\n      { label: \"Woche\", labelPlural: \"Wochen\", seconds: 3600 * 24 * 7 },\n      { label: \"Tag\", labelPlural: \"Tagen\", seconds: 3600 * 24 },\n      { label: \"Stunde\", labelPlural: \"Stunden\", seconds: 3600 },\n      { label: \"Minute\", labelPlural: \"Minuten\", seconds: 60 },\n      { label: \"Sekunde\", labelPlural: \"Sekunden\", seconds: 1 },\n    ];\n\n    const seconds = Math.floor((Date.now() - date.getTime()) / 1000);\n    const interval = intervals.find(i => i.seconds < seconds);\n    if (interval !== undefined) {\n      const count = Math.floor(seconds / interval.seconds);\n      const label = count > 1 ? interval.labelPlural : interval.label;\n      this.createdDate.innerHTML = `vor ${count} ${label}`;\n    } else {\n      this.createdDate.innerHTML = `${date.toLocaleDateString(\"de-DE\")}`;\n    }\n  }\n\n  /**\n   * Handles CTA-click, by dispatching 'dva-open-overlay' event\n   * @param {Event} e\n   */\n  @uiEvent(\"overlayCta\", \"click\")\n  openOverlay(e: any) {\n    e.preventDefault();\n    this.dispatchEvent(\n      new CustomEvent(\"dva-open-overlay\", {\n        detail: {\n          target: this,\n          data: this.teaserData,\n          teaserIdx: this.teaserIdx,\n        },\n      }),\n    );\n  }\n}\n\ncustomElements.define(\"dvag-m-c01e-teaser\", DvagC01eTeaser);\n","import { html } from \"lit-html\";\n\nimport { DvaRatingBox } from \"./dva-m-rating-box\";\n\ntype FilledOptions = \"no\" | \"half\" | \"full\";\n\nconst renderRatingStar = (filled: FilledOptions, starIdx: number, ratingBox: DvaRatingBox) => {\n  return html`\n    <dva-e-icon\n      class=\"dva-e-rating-star${filled !== \"no\" ? ` dva-e-rating-star--${filled}` : \"\"}\"\n      icon-id=\"dva-icon-star\"\n      ?half-filled=${filled === \"half\"}\n      @click=${() => {\n        if (ratingBox.editMode) ratingBox.rating = starIdx + 1;\n      }}\n    ></dva-e-icon>\n  `;\n};\n\ntype RatingBoxTemplateArgs = {\n  curRating: number;\n  ratingBox: DvaRatingBox;\n};\n\n/**\n * True, if given star should be shown as Full Star\n * @param {number} rating - current rating\n * @param {number} index - index of given star\n * @returns {boolean}\n */\nconst isFullStar = (rating: number, index: number): boolean => {\n  return index + 0.5 < rating;\n};\n\n/**\n * True, if given star should be shown as Half Star\n * @param {number} rating - current rating\n * @param {number} index - index of given star\n * @returns {boolean}\n */\nconst isHalfStar = (rating: number, index: number): boolean => {\n  return index + 1 > rating && index + 0.1 <= rating;\n};\n\nconst getStarOptions = (args: RatingBoxTemplateArgs): Array<FilledOptions> => {\n  return new Array(5).fill(true).map((_value, idx) => {\n    if (isFullStar(args.curRating, idx)) return \"full\";\n    if (isHalfStar(args.curRating, idx)) return \"half\";\n    return \"no\";\n  });\n};\n\nexport const ratingBoxTemplate = (args: RatingBoxTemplateArgs) => {\n  return html`\n    <div class=\"dva-m-rating-box__ratingstar-wrapper\">\n      ${getStarOptions(args).map((filled: FilledOptions, starIdx: number) =>\n        renderRatingStar(filled, starIdx, args.ratingBox),\n      )}\n    </div>\n    <span class=\"dvag-e-form-field__error\">\n      <dva-e-icon class=\"dvag-e-form-field__error-icon\" icon-id=\"dva-icon-error-16px\"></dva-e-icon> Bitte bewerten Sie.\n    </span>\n  `;\n};\n","import { Component, prop } from \"@kluntje/core\";\nimport { ViewportObserver } from \"@kluntje/services\";\nimport { removeEvent, toggleClass } from \"@kluntje/js-utils/lib/dom-helpers\";\nimport { render } from \"lit-html\";\nimport { ERROR } from \"Constants/cssClasses\";\nimport { IN_VIEWPORT_EVENT } from \"Constants/eventTypes\";\n\nimport { ratingBoxTemplate } from \"./dva-m-rating-box.template\";\n\nexport class DvaRatingBox extends Component {\n  viewportObserver = ViewportObserver.getInstance();\n\n  @prop\n  editMode = false;\n\n  constructor() {\n    super({\n      events: [\n        {\n          event: IN_VIEWPORT_EVENT,\n          target: \"this\",\n          handler: \"handleIntersectionChange\",\n        },\n      ],\n      initialStates: {\n        loaded: false,\n        inValidationMode: false,\n      },\n      reactions: {\n        inValidationMode: [\"renderComponent\"],\n      },\n    });\n  }\n\n  static get observedAttributes() {\n    return [\"rating\"];\n  }\n\n  attributeChangedCallback(name: string, oldValue: any, newValue: any) {\n    if (name === \"rating\" && oldValue !== newValue && this.state.initialized) {\n      this.renderComponent();\n    }\n  }\n\n  afterComponentRender(): void {\n    this.viewportObserver.observe(this);\n  }\n\n  get rating() {\n    return parseFloat((this.getAttribute(\"rating\") || \"5\").replace(\",\", \".\"));\n  }\n\n  set rating(newRating: number) {\n    this.setAttribute(\"rating\", newRating.toString());\n  }\n\n  get name(): string {\n    return this.getAttribute(\"name\") || \"\";\n  }\n\n  /**\n   * Handles Intersection Change, by removing viewportObserver\n   * and initializing ImageLoad\n   */\n  handleIntersectionChange(): void {\n    this.viewportObserver.unobserve(this);\n    removeEvent(this, IN_VIEWPORT_EVENT, this.handleIntersectionChange, this);\n    if (!this.state.loaded) {\n      this.renderComponent();\n    }\n  }\n\n  /**\n   * initially renders the containing stars\n   */\n  renderComponent(): void {\n    if (this.state.inValidationMode) {\n      toggleClass(this, ERROR, this.rating === 0);\n    }\n    render(ratingBoxTemplate({ curRating: this.rating, ratingBox: this }), this);\n  }\n\n  validate() {\n    if (this.editMode) this.setState({ inValidationMode: true });\n  }\n}\n\ncustomElements.define(\"dva-m-rating-box\", DvaRatingBox);\n","import { Component, uiElement, uiElements, uiEvent } from \"@kluntje/core\";\nimport { DvagC01eTeaserOverlay } from \"Components/dvag-m-c01e-teaser-overlay/dvag-m-c01e-teaser-overlay\";\nimport { DvagC01eTeaser } from \"Components/dvag-m-c01e-teaser/dvag-m-c01e-teaser\";\n\nexport class DvagC07RatingTeaserSlider extends Component {\n  @uiElements(\".dvag-m-c01e-teaser\")\n  teasers: Array<DvagC01eTeaser>;\n\n  @uiElement(\".dvag-m-c01e-teaser-overlay\")\n  overlay: DvagC01eTeaserOverlay;\n\n  constructor() {\n    super({\n      initialStates: {\n        overlayTeaser: -1,\n      },\n      reactions: {\n        overlayTeaser: [\"renderOverlay\"],\n      },\n    });\n  }\n\n  /**\n   * returns the index of the last available teaser\n   * @returns {number}\n   */\n  get lastTeaser(): number {\n    return this.teasers.length - 1;\n  }\n\n  /**\n   * Triggers Overlay Rendering, by setting overlayTeaser-state\n   */\n  @uiEvent(\"teasers\", \"dva-open-overlay\")\n  openOverlay({ detail }: any): void {\n    this.setState({ overlayTeaser: detail.teaserIdx });\n  }\n\n  /**\n   * renders Overlay with needed data of given teaser\n   */\n  renderOverlay({ overlayTeaser }: any): void {\n    if (overlayTeaser < -1) {\n      this.setState({ overlayTeaser: -1 }, { silent: true });\n      return;\n    }\n\n    if (overlayTeaser === -1) return;\n\n    if (overlayTeaser > this.lastTeaser) {\n      this.setState({ overlayTeaser: this.lastTeaser }, { silent: true });\n      return;\n    }\n\n    this.overlay.setState({ args: this.teasers[overlayTeaser].teaserData });\n  }\n\n  /**\n   * Handles Overlay Navigation event, by setting overlayTeaser-state\n   */\n  @uiEvent(\"overlay\", \"dvag-m-c01e-teaser-overlay-nav\")\n  handleOverlayNav({ detail }: any): void {\n    if (detail.direction === \"prev\" && this.state.overlayTeaser === 0) return;\n\n    let nextOverlayTeaser = this.state.overlayTeaser + 1;\n    if (detail.direction === \"prev\") nextOverlayTeaser -= 2;\n\n    this.setState({ overlayTeaser: nextOverlayTeaser });\n  }\n\n  /**\n   * Handles Overly closing event, by resetting overlayTeaser-state\n   * to its initial value\n   */\n  @uiEvent(\"overlay\", \"dva-overlay-closed\")\n  handleOverlayClosed(): void {\n    this.setState({ overlayTeaser: -1 });\n  }\n}\n\ncustomElements.define(\"dvag-m-c07-rating-teaser-slider\", DvagC07RatingTeaserSlider);\n","import { SCROLL_LOCK } from \"Constants/cssClasses\";\nimport { addClass, removeClass } from \"@kluntje/js-utils/lib/dom-helpers\";\n\nlet scrollPosition = 0;\nlet scrollLockEnabled = false;\n\nexport const enableScrollLock = () => {\n  scrollPosition = window.pageYOffset;\n  addClass(document.body, SCROLL_LOCK);\n  document.body.style.top = `-${scrollPosition}px`;\n  scrollLockEnabled = true;\n};\n\nexport const disableScrollLock = () => {\n  removeClass(document.body, SCROLL_LOCK);\n  document.body.style.top = \"\";\n  window.scrollTo(0, scrollPosition);\n  scrollLockEnabled = false;\n};\n\nexport const toggleScrollLock = (enable?: boolean) => {\n  if (enable === true || (enable !== false && !scrollLockEnabled)) {\n    enableScrollLock();\n  } else {\n    disableScrollLock();\n  }\n};\n","class DebuggerService {\n  debugModeActive = false;\n\n  log(message?: any, ...args: any[]) {\n    if (this.debugModeActive === false) return;\n    console.log(message, ...args);\n  }\n\n  warn(message?: any, ...args: any[]) {\n    if (this.debugModeActive === false) return;\n    console.warn(message, ...args);\n  }\n\n  error(message?: any, ...args: any[]) {\n    if (this.debugModeActive === false) return;\n    console.error(message, ...args);\n  }\n}\n\nexport default new DebuggerService();\n","import { findAll, onEvent, removeEvent } from \"@kluntje/js-utils/lib/dom-helpers\";\n\nimport DebuggerService from \"./DebuggerService\";\n\nexport interface TrapTargetOptions {\n  activeElementBeforeTrapped: Element | null;\n  tabableElements: Array<HTMLElement>;\n}\n\nclass FocusService {\n  static TABABLE_ELEMENTS_SELECTOR = 'button, a[href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])';\n  private _focusTrapped = false;\n\n  private tabableElementsMap: WeakMap<HTMLElement, TrapTargetOptions> = new WeakMap();\n\n  private trapTargetList: Array<HTMLElement> = [];\n\n  eventBindingMap = {};\n  eventIdMap = new WeakMap();\n\n  get focusTrapped() {\n    return this._focusTrapped;\n  }\n\n  set focusTrapped(newValue) {\n    if (this._focusTrapped === newValue) return;\n\n    if (newValue === true) {\n      onEvent(document.body, [\"keydown\"], this.handleKeyDown, this);\n    } else {\n      removeEvent(document.body, [\"keydown\"], this.handleKeyDown, this);\n    }\n    this._focusTrapped = newValue;\n  }\n\n  get currentTrapTarget(): HTMLElement | null {\n    if (this.trapTargetList.length === 0) return null;\n\n    return this.trapTargetList[this.trapTargetList.length - 1];\n  }\n\n  get firstTabableElement() {\n    if (this.currentTrapTarget === null) return null;\n    return this.getFirstTabableElementOf(this.currentTrapTarget);\n  }\n\n  get lastTabableElement() {\n    if (this.currentTrapTarget === null) return null;\n    return this.getLastTabableElementOf(this.currentTrapTarget);\n  }\n\n  get firstTabableElementActive() {\n    if (this.currentTrapTarget === null) return false;\n    return this.isFirstTabableElementActive(this.currentTrapTarget);\n  }\n\n  get lastTabableElementActive() {\n    if (this.currentTrapTarget === null) return false;\n    return this.isLastTabableElementActive(this.currentTrapTarget);\n  }\n\n  trapFocusIn(target: HTMLElement) {\n    const tabableElements = this.tabableElementsIn(target);\n\n    if (tabableElements.length === 0) return;\n\n    this.trapTargetList.push(target);\n    this.tabableElementsMap.set(target, {\n      activeElementBeforeTrapped: document.activeElement,\n      tabableElements,\n    });\n    this.focusTrapped = true;\n    // eslint-disable-next-line no-unused-expressions\n    this.firstTabableElement?.focus();\n  }\n\n  unTrapFocusIn(target: HTMLElement) {\n    this.trapTargetList = this.trapTargetList.filter(trapElement => trapElement !== target);\n    const activeElement = this.tabableElementsMap.get(target)?.activeElementBeforeTrapped || null;\n    try {\n      if (activeElement !== null) (activeElement as HTMLElement).focus();\n    } catch (error) {\n      DebuggerService.error(\"FocusService: \", error);\n    }\n    this.tabableElementsMap.delete(target);\n\n    if (this.trapTargetList.length === 0) this.focusTrapped = false;\n  }\n\n  private handleKeyDown(e: KeyboardEvent): void {\n    if (e.key !== \"Tab\") return;\n\n    if (e.shiftKey && this.firstTabableElementActive) {\n      // eslint-disable-next-line no-unused-expressions\n      this.lastTabableElement?.focus();\n      e.preventDefault();\n    } else if (e.shiftKey === false && this.lastTabableElementActive) {\n      // eslint-disable-next-line no-unused-expressions\n      this.firstTabableElement?.focus();\n      e.preventDefault();\n    }\n  }\n\n  private tabableElementsIn(target: HTMLElement) {\n    return findAll(target, FocusService.TABABLE_ELEMENTS_SELECTOR);\n  }\n\n  private getFirstTabableElementOf(target: HTMLElement) {\n    const tabableElements = this.tabableElementsMap.get(target)?.tabableElements || [];\n    if (tabableElements.length === 0) return null;\n    return tabableElements[0];\n  }\n\n  private getLastTabableElementOf(target: HTMLElement) {\n    const tabableElements = this.tabableElementsMap.get(target)?.tabableElements || [];\n    if (tabableElements.length === 0) return null;\n    return tabableElements[tabableElements.length - 1];\n  }\n\n  private isFirstTabableElementActive(target: HTMLElement) {\n    const firstTabableElement = this.getFirstTabableElementOf(target);\n    if (firstTabableElement === null) return false;\n    return firstTabableElement === document.activeElement;\n  }\n\n  private isLastTabableElementActive(target: HTMLElement) {\n    const lastTabableElement = this.getLastTabableElementOf(target);\n    if (lastTabableElement === null) return false;\n    return lastTabableElement === document.activeElement;\n  }\n}\n\nexport default new FocusService();\n","import { find } from \"@kluntje/js-utils/lib/dom-helpers\";\nimport { DvagBasicOverlay } from \"Components/dvag-m-basic-overlay/dvag-m-basic-overlay\";\nimport { render } from \"lit-html\";\nimport { dvagBasicOverlayAsLightboxTemplateArgs } from \"Components/dvag-m-basic-overlay/dvag-m-basic-overlay.template\";\nimport { waitForInitialization } from \"Helpers/componentHelper/waitForInitialization\";\n\n/**\n * Global helper service to assist with lightboxes for single images\n */\nclass LightboxService {\n  private lightboxInstance: DvagBasicOverlay | null = null;\n\n  public createLightbox(lightboxImageUrl: string) {\n    this.renderLightbox({\n      imageUrl: lightboxImageUrl,\n      cssClasses: \"dvag-m-basic-overlay--lightbox\",\n    });\n  }\n\n  public destroyLightbox() {\n    if (this.lightboxInstance === null) return;\n    this.lightboxInstance.close();\n    document.body.removeChild(this.lightboxInstance);\n    this.lightboxInstance = null;\n  }\n\n  private async renderLightbox(args: dvagBasicOverlayAsLightboxTemplateArgs) {\n    const renderDvagBasicOverlayAsLightbox = await this.loadOverlayTemplate();\n    const lightboxWrapper = document.createElement(\"div\");\n    render(renderDvagBasicOverlayAsLightbox(args), lightboxWrapper);\n\n    const overlay = find<DvagBasicOverlay>(lightboxWrapper, \".dvag-m-basic-overlay\");\n    if (overlay === null) return;\n    document.body.appendChild(overlay);\n    this.lightboxInstance = overlay;\n    await waitForInitialization(overlay);\n    overlay.open();\n  }\n\n  private async loadOverlayTemplate() {\n    const { renderBasicOverlayAsLightbox } = await import(\n      \"Components/dvag-m-basic-overlay/dvag-m-basic-overlay.template\"\n    );\n    return renderBasicOverlayAsLightbox;\n  }\n}\n\nexport default new LightboxService();\n","import { Component, uiElement, uiEvent } from \"@kluntje/core\";\nimport { addClass, onEvent, removeClass, removeEvent, waitFor } from \"@kluntje/js-utils/lib/dom-helpers\";\nimport { ACTIVE, ANIMATING } from \"Constants/cssClasses\";\nimport { OVERLAY_CLOSE_EVENT, OVERLAY_OPEN_EVENT } from \"Constants/eventTypes\";\nimport { disableScrollLock, enableScrollLock } from \"Helpers/domHelper/scrollLock\";\nimport FocusService from \"Services/FocusService\";\nimport LightboxService from \"Services/LightboxService\";\n\nexport class DvagBasicOverlay extends Component {\n  @uiElement(\".dvag-m-basic-overlay__close\")\n  closeBtn: HTMLButtonElement;\n\n  public async close() {\n    disableScrollLock();\n\n    removeClass(this, ANIMATING);\n    await waitFor(300);\n    removeClass(this, ACTIVE);\n    removeEvent(window, \"keyup\", this.handleKeyboardsEvents, this);\n    FocusService.unTrapFocusIn(this);\n    LightboxService.destroyLightbox();\n    this.dispatchEvent(new CustomEvent(OVERLAY_CLOSE_EVENT));\n  }\n\n  public async open() {\n    enableScrollLock();\n\n    addClass(this, ACTIVE);\n    await waitFor(100);\n    addClass(this, ANIMATING);\n    onEvent(window, \"keyup\", this.handleKeyboardsEvents, this);\n    FocusService.trapFocusIn(this);\n    this.dispatchEvent(new CustomEvent(OVERLAY_OPEN_EVENT));\n  }\n\n  handleKeyboardsEvents(e: KeyboardEvent) {\n    if (e.key !== \"Escape\") return;\n    this.close();\n  }\n\n  handleCookieChange() {\n    // to fix inheritance bug with kluntje decorators\n    // @TODO: Remove later\n  }\n\n  // eslint-disable-next-line no-unused-vars, @typescript-eslint/no-unused-vars\n  handleOverlayClick(_e: Event) {\n    // to fix inheritance bug with kluntje decorators\n    // @TODO: Remove later\n  }\n\n  @uiEvent(\"closeBtn\", \"click\")\n  handleCloseBtnClick() {\n    this.close();\n  }\n}\n\ncustomElements.define(\"dvag-m-basic-overlay\", DvagBasicOverlay);\n","import { render, TemplateResult } from \"lit-html\";\nimport { uiElement, uiEvent } from \"@kluntje/core\";\nimport { hasClass, removeClass, waitFor } from \"@kluntje/js-utils/lib/dom-helpers\";\nimport { ACTIVE, ANIMATING } from \"Constants/cssClasses\";\nimport { RatingTeaserData } from \"Components/dvag-m-c01e-teaser/dvag-m-c01e-teaser\";\nimport { DvagBasicOverlay } from \"Components/dvag-m-basic-overlay/dvag-m-basic-overlay\";\n\nexport class DvagC01eTeaserOverlay extends DvagBasicOverlay {\n  @uiElement(\".dvag-m-c01e-teaser-overlay__nav-btn--prev\")\n  prevBtn: HTMLAnchorElement;\n\n  @uiElement(\".dvag-m-c01e-teaser-overlay__nav-btn--next\")\n  nextBtn: HTMLAnchorElement;\n\n  constructor() {\n    super({\n      initialStates: {\n        args: null,\n      },\n      reactions: {\n        args: [\"openOverlay\"],\n      },\n      asyncRendering: true,\n    });\n  }\n\n  /**\n   * default overlayArgs needed for initial render\n   * @returns {RatingTeaserData}\n   */\n  get defaultArgs(): RatingTeaserData {\n    return {\n      vbImg: \"\",\n      vbName: \"\",\n      vbHomepage: \"\",\n      vbLocation: \"\",\n      mainRating: \"0\",\n      date: \"\",\n      headline: \"\",\n      text: \"\",\n      customerName: \"\",\n      customerInfo: \"\",\n      ratings: {\n        consulting: \"0\",\n        satisfaction: \"0\",\n        service: \"0\",\n      },\n      hasPrevTeaser: false,\n      hasNextTeaser: false,\n    };\n  }\n\n  /**\n   * override renderAsync method of parent\n   * initially render overlay to add needed event to ui elements\n   * @override\n   */\n  async renderAsync() {\n    try {\n      const ratingOverlayTemplate = await this.loadTemplate();\n      render(ratingOverlayTemplate(this.defaultArgs), this);\n    } catch (e) {\n      console.error(\"Overlay:\", e);\n    }\n  }\n\n  async loadTemplate(): Promise<(args: RatingTeaserData) => TemplateResult> {\n    const { ratingOverlayTemplate } = await import(\"./dvag-m-c01e-teaser-overlay.template\");\n    return ratingOverlayTemplate;\n  }\n\n  /**\n   * renders overlay with given args and opens it by adding ACTIVE Class to it\n   */\n  async openOverlay({ args }: any): Promise<void> {\n    if (args === null) return;\n    const ratingOverlayTemplate = await this.loadTemplate();\n    render(ratingOverlayTemplate(args), this);\n    if (hasClass(this, ACTIVE)) return;\n    super.open();\n  }\n\n  /**\n   * closes Overlay by removing ACTIVE Class from it,\n   * additionally resets overlayArgs to null\n   * @override\n   */\n  async close() {\n    this.setState({ args: null });\n    removeClass(this, ANIMATING);\n    await waitFor(300);\n    removeClass(this, ACTIVE);\n    this.dispatchEvent(\n      new CustomEvent(\"dva-overlay-closed\", {\n        detail: {\n          target: this,\n        },\n      }),\n    );\n    super.close();\n  }\n\n  /**\n   * Handles prev-btn click event, by dispatching navigation event\n   */\n  @uiEvent(\"prevBtn\", \"click\")\n  loadPrevTeaser() {\n    this.dispatchEvent(\n      new CustomEvent(\"dvag-m-c01e-teaser-overlay-nav\", {\n        detail: {\n          target: this,\n          direction: \"prev\",\n        },\n      }),\n    );\n  }\n\n  /**\n   * Handles next-btn click event, by dispatching navigation event\n   */\n  @uiEvent(\"nextBtn\", \"click\")\n  loadNextTeaser(): void {\n    this.dispatchEvent(\n      new CustomEvent(\"dvag-m-c01e-teaser-overlay-nav\", {\n        detail: {\n          target: this,\n          direction: \"next\",\n        },\n      }),\n    );\n  }\n\n  /**\n   * Adds KeyboardEvent-reactions for arrow keys\n   * @override\n   */\n  handleKeyup(e: KeyboardEvent): void {\n    switch (e.key) {\n      case \"Escape\":\n        this.close();\n        break;\n      case \"ArrowRight\":\n        if (hasClass(this, ACTIVE)) {\n          this.loadNextTeaser();\n        }\n        break;\n      case \"ArrowLeft\":\n        if (hasClass(this, ACTIVE)) {\n          this.loadPrevTeaser();\n        }\n        break;\n    }\n  }\n}\n\ncustomElements.define(\"dvag-m-c01e-teaser-overlay\", DvagC01eTeaserOverlay);\n","import { truncateText } from \"Utils/truncateText\";\nimport { html, render } from \"lit\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport { unsafeHTML } from \"lit-html/directives/unsafe-html.js\";\nimport fetchService from \"Services/fetch.service\";\nimport \"./rating-teaser-slider.scss\";\nimport \"Components/dvag-m-c01e-teaser/dvag-m-c01e-teaser\";\nimport \"Components/dva-m-rating-box/dva-m-rating-box\";\nimport \"Components/dvag-m-c07-rating-teaser-slider/dvag-m-c07-rating-teaser-slider\";\nimport \"Components/dvag-m-basic-slider/dvag-m-basic-slider\";\nimport \"Components/dvag-m-c01e-teaser-overlay/dvag-m-c01e-teaser-overlay\";\nimport { DebuggerService } from \"@kluntje/services\";\nimport { cleanUpBlock } from \"Utils/cleanUpBlock\";\n\ninterface RatingTeaserSliderTemplateArgs {\n  sliderId: string;\n  subheadline: string;\n  headline: string;\n  text: string;\n  slides: RatingTeaserSlideTemplateArgs[];\n  ctaLabel: string;\n  ctaUrl: string;\n}\n\ninterface RatingTeaserSlideTemplateArgs {\n  sliderId: string;\n  slideIndex: number;\n  slidesLength: number;\n  consultingRating: string;\n  satisfactionRating: string;\n  serviceRating: string;\n  rating: string;\n  vbName: string;\n  vbImageUrl: string;\n  vbHomepageUrl: string;\n  vbLocation: string;\n  headline: string;\n  text: string;\n  reviewFrom: string;\n  reviewerCustomerSince: string;\n  ratingDate: string;\n}\n\nconst ratingTeaserSlideTemplate = (args: RatingTeaserSlideTemplateArgs) => {\n  return html`\n    <div\n      id=\"c07-ratingteaserslider-${args.sliderId}-slide-${args.slideIndex + 1}\"\n      class=\"dvag-m-basic-slider__slide\"\n      aria-roledescription=\"slide\"\n      aria-label=${`Slide ${args.slideIndex + 1} of ${args.slidesLength}`}\n    >\n      <dvag-m-c01e-teaser\n        class=\"dvag-m-c01e-teaser\"\n        teaser-index=\"${args.slideIndex}\"\n        consulting-rating=\"${args.consultingRating}\"\n        satisfaction-rating=\"${args.satisfactionRating}\"\n        service-rating=\"${args.serviceRating}\"\n        vb-name=\"${args.vbName}\"\n        vb-image-url=\"${args.vbImageUrl}\"\n        vb-homepage-url=\"${args.vbHomepageUrl}\"\n        vb-location=\"${args.vbLocation}\"\n      >\n        <div class=\"dvag-m-c01e-teaser__content\">\n          <div class=\"dvag-m-c01e-teaser__rating-wrapper\">\n            <dva-m-rating-box\n              class=\"dva-m-rating-box dvag-m-c01e-teaser__main-rating\"\n              rating=\"${args.rating}\"\n            ></dva-m-rating-box>\n            <p class=\"dvag-m-c01e-teaser__rating-label\">${args.rating} von 5 Sternen</p>\n          </div>\n\n          <h3 class=\"dvag-m-c01e-teaser__headline\">${args.headline}</h3>\n          <p class=\"dvag-m-c01e-teaser__text\">${truncateText(args.text, 157)}</p>\n          <p class=\"dvag-m-c01e-teaser__full-text\">${args.text}</p>\n\n          <a href=\"#\" class=\"dva-e-link dvag-m-c01e-teaser__cta\">\n            <span class=\"dva-e-link__label\">Mehr erfahren</span>\n            <dva-e-icon class=\"dva-e-icon\" icon-id=\"dva-icon-arrow-right-48px\"></dva-e-icon>\n          </a>\n        </div>\n        <div class=\"dvag-m-c01e-teaser__footer\">\n          <h4 class=\"dvag-m-c01e-teaser__customer-label\">Bewertet von:</h4>\n          <p class=\"dvag-m-c01e-teaser__customer-name\">${args.reviewFrom}</p>\n          <p class=\"dvag-m-c01e-teaser__customer-info\">\n            <span class=\"dvag-m-c01e-teaser__rating-date\" date=\"${args.ratingDate}\">${args.ratingDate}</span>,\n            <span class=\"dvag-m-c01e-teaser__customer-information\">Kunde seit ${args.reviewerCustomerSince}</span>\n          </p>\n        </div>\n      </dvag-m-c01e-teaser>\n    </div>\n  `;\n};\n\nconst ratingTeaserSliderTemplate = (args: RatingTeaserSliderTemplateArgs) => {\n  return html`\n    <div\n      class=\"c07-ratingteaserslider carousel dvag-h-margin-bottom--none\ndvag-h-margin-top--none\ndvag-h-background--grey\ndvag-h-skew--top*\"\n    >\n      <dvag-m-c07-rating-teaser-slider\n        class=\"dvag-m-c07-rating-teaser-slider dvag-m-skew-component cmp-carousel  \"\n        id=\"c07-ratingteaserslider-${args.sliderId}\"\n        role=\"group\"\n        data-cmp-is=\"carousel\"\n      >\n        <div class=\"dva-h-skew--in\"></div>\n\n        <div class=\"dvag-m-skewed-box__content\">\n          <div class=\"dvag-m-c07-rating-teaser-slider__grid-wrapper\">\n            <div class=\"dvag-m-section-header\">\n              <h3 class=\"dvag-m-section-header__subheadline\">${args.subheadline}</h3>\n              <h2 class=\"dvag-m-section-header__headline\">${args.headline}</h2>\n              <div class=\"dvag-m-section-header__text dvag-e-richtext\">${unsafeHTML(args.text)}</div>\n            </div>\n          </div>\n\n          <dvag-m-basic-slider\n            class=\"dvag-m-basic-slider dvag-m-teaser-slider cmp-carousel\"\n            title=\"Das sagen meine Kunden\"\n            id=\"c07-ratingteaserslider-${args.sliderId}-slider\"\n            role=\"group\"\n            aria-live=\"polite\"\n            aria-roledescription=\"carousel\"\n            data-cmp-is=\"carousel\"\n          >\n            <div class=\"dvag-m-basic-slider__slides\">${args.slides.map(slide => ratingTeaserSlideTemplate(slide))}</div>\n\n            <div class=\"dvag-m-basic-slider__controls\">\n              <button\n                class=\"dva-e-button dva-e-button--primary dva-e-button--rebrush dvag-m-basic-slider__nav-button dvag-m-basic-slider__nav-button--prev\"\n              >\n                <div class=\"dva-e-button__background\"></div>\n                <dva-e-icon class=\"dva-e-icon\" icon-id=\"dva-icon-chevron-left\"></dva-e-icon>\n              </button>\n              <button\n                class=\"dva-e-button dva-e-button--primary dva-e-button--rebrush dvag-m-basic-slider__nav-button dvag-m-basic-slider__nav-button--next dva-state-visible\"\n              >\n                <div class=\"dva-e-button__background\"></div>\n                <dva-e-icon class=\"dva-e-icon\" icon-id=\"dva-icon-chevron-right\"></dva-e-icon>\n              </button>\n            </div>\n\n            <div class=\"dvag-m-basic-slider__grid-container-wrapper\">\n              <div class=\"dvag-m-basic-slider__scroll-bar\">\n                <button\n                  class=\"dvag-m-basic-slider__scroll-indicator\"\n                  tabindex=\"-1\"\n                  style=\"width: 19.9077%; transform: translateX(0%);\"\n                ></button>\n              </div>\n            </div>\n          </dvag-m-basic-slider>\n\n          <dvag-m-c01e-teaser-overlay class=\"dvag-m-c01e-teaser-overlay\"></dvag-m-c01e-teaser-overlay>\n\n          <div class=\"dvag-m-c07-rating-teaser-slider__grid-wrapper\">\n            <div class=\"dvag-m-c07-rating-teaser-slider__button-wrapper\">\n              <!-- linkType: internalCrossContext -->\n              <a class=\"dva-e-button dva-e-button--rebrush \" href=\"${args.ctaUrl}\">\n                <div class=\"dva-e-button__background\"></div>\n                <span class=\"dva-e-button__label\">${args.ctaLabel}</span>\n              </a>\n              <!-- linkType: internal -->\n            </div>\n          </div>\n        </div>\n\n        <div class=\"dva-h-skew--out\"></div>\n      </dvag-m-c07-rating-teaser-slider>\n    </div>\n  `;\n};\n\nexport interface SlidesJsonResponse {\n  total: number;\n  offset: number;\n  limit: number;\n  data: SlidesJsonResponseItem[];\n  \":type\": string;\n}\n\nexport interface SlidesJsonResponseItem {\n  consultingRating: string;\n  satisfactionRating: string;\n  serviceRating: string;\n  rating: string;\n  vbName: string;\n  vbImageUrl: string;\n  vbHomepageUrl: string;\n  vbLocation: string;\n  headline: string;\n  text: string;\n  reviewFrom: string;\n  reviewerCustomerSince: string;\n  ratingDate: string;\n}\n\nconst getSlidesTemplateArgs = (slides: SlidesJsonResponse, sliderId: string): RatingTeaserSlideTemplateArgs[] => {\n  return slides.data.map((slide, index) => ({\n    sliderId,\n    slideIndex: index,\n    slidesLength: slides.data.length,\n    consultingRating: slide.consultingRating,\n    satisfactionRating: slide.satisfactionRating,\n    serviceRating: slide.serviceRating,\n    rating: slide.rating,\n    vbName: slide.vbName,\n    vbImageUrl: slide.vbImageUrl,\n    vbHomepageUrl: slide.vbHomepageUrl,\n    vbLocation: slide.vbLocation,\n    headline: slide.headline,\n    text: slide.text,\n    reviewFrom: slide.reviewFrom,\n    reviewerCustomerSince: slide.reviewerCustomerSince,\n    ratingDate: slide.ratingDate,\n  }));\n};\n\nexport default async function (block: HTMLElement) {\n  try {\n    const sliderId = uuidv4();\n    const subheadline = block.children[0].textContent || \"\";\n    const headline = block.children[1].textContent || \"\";\n    const text = block.children[2].innerHTML || \"\";\n    const slidesEndpoint = block.children[3].textContent || \"\";\n    const slides = await fetchService.fetchJson<SlidesJsonResponse>(slidesEndpoint.trim());\n    const cta = block.children[4].getElementsByTagName(\"a\")[0];\n    const ctaLabel = cta.textContent || \"\";\n    const ctaUrl = cta.getAttribute(\"href\") || \"\";\n\n    cleanUpBlock(block);\n\n    render(\n      ratingTeaserSliderTemplate({\n        sliderId,\n        subheadline,\n        headline,\n        text,\n        slides: getSlidesTemplateArgs(slides, sliderId),\n        ctaLabel,\n        ctaUrl,\n      }),\n      block,\n    );\n  } catch (error) {\n    DebuggerService.error(\"rating-teaser-slider\", error);\n  }\n}\n"],"file":"rating-teaser-slider/rating-teaser-slider.js"}