{"version":3,"file":"recommendation-bar.js","sources":["../../src/blocks/recommendation-bar/recommendation-bar.ts"],"sourcesContent":["import { cleanUpBlock } from \"Utils/cleanUpBlock\";\nimport { html, render } from \"lit\";\n\nimport \"./recommendation-bar.scss\";\n\ninterface RecommendationBarTemplateArgs {\n  headline?: string;\n  text?: string;\n  url?: string;\n  rating: number;\n  modalHeadline?: string;\n  modalText?: string;\n}\n\nfunction openModal() {\n  const overlay = document.getElementById(\"recommendationOverlay\");\n  if (overlay) {\n    overlay.classList.add(\"dva-state-active\");\n    console.log(\"correct\");\n  }\n}\n\nfunction closeModal() {\n  const overlay = document.getElementById(\"recommendationOverlay\");\n  if (overlay) {\n    overlay.classList.remove(\"dva-state-active\");\n  }\n}\n\nconst recommendationBarTemplate = (args: RecommendationBarTemplateArgs) => {\n  const generateStars = (rating: number) => {\n    const stars = [];\n    for (let i = 0; i < rating; i++) {\n      stars.push(\n        html`<dva-e-icon icon-id=\"dva-icon-star\" class=\"dva-e-rating-star dva-e-rating-star--full\"></dva-e-icon>`,\n      );\n    }\n    return stars;\n  };\n  return html`\n    <div class=\"dvag-m-recommendation-bar\">\n      <div class=\"dvag-grid\">\n        <div class=\"dvag-grid-row\">\n          <div class=\"dvag-grid-col-1-12 dvag-grid-col-3-7 dvag-grid-col-4-8\">\n            <h3 class=\"dvag-m-recommendation-bar__headline\">${args.headline}</h3>\n            <p class=\"dvag-m-recommendation-bar__text\">${args.text}</p>\n          </div>\n          <div class=\"dvag-m-recommendation-bar__cta-wrapper dvag-grid-col-1-12 dvag-grid-col-3-5 dvag-grid-col-4-4\">\n            <div class=\"dvag-m-recommendation-bar__rating-wrapper\">\n              <dva-m-rating-box class=\"dva-m-rating-box\" rating=\"${args.rating}\" edit-mode=\"false\">\n                <div class=\"dva-m-rating-box__ratingstar-wrapper\">${generateStars(args.rating)}</div>\n              </dva-m-rating-box>\n              <p class=\"dvag-m-recommendation-bar__rating-label\">${args.rating} von 5 Sternen</p>\n            </div>\n            <dvag-e-overlay-toggle\n              class=\"dvag-e-overlay-toggle dva-e-button dva-e-button--rebrush dva-e-button--small dva-e-button--white\"\n              target=\"#recommendationOverlay\"\n              tabindex=\"0\"\n              @click=${openModal}\n            >\n              <div class=\"dva-e-button__background\"></div>\n              <span class=\"dva-e-button__label\">Jetzt weiterempfehlen</span>\n            </dvag-e-overlay-toggle>\n          </div>\n        </div>\n      </div>\n      <dvag-m-basic-overlay\n        class=\"dvag-m-basic-overlay dvag-m-recommendation-bar__overlay dva-state-animating\"\n        role=\"dialog\"\n        aria-modal=\"true\"\n        id=\"recommendationOverlay\"\n      >\n        <div class=\"dvag-m-basic-overlay__content\">\n          <div class=\"dvag-m-basic-overlay__inner-content\">\n            <button\n              type=\"button\"\n              class=\"dva-e-button dvag-m-basic-overlay__close dvag-m-recommendation-bar__overlay-close dva-e-button--icon-only\"\n              @click=${closeModal}\n            >\n              <div class=\"dva-e-button__background\"></div>\n              <dva-e-icon class=\"dva-e-icon dva-e-button__icon\" icon-id=\"dva-icon-close\"></dva-e-icon>\n            </button>\n            <div class=\"dvag-m-recommendation-bar__overlay-rating-wrapper\">\n              <dva-m-rating-box class=\"dva-m-rating-box\" rating=\"5\" edit-mode=\"false\">\n                <div class=\"dva-m-rating-box__ratingstar-wrapper\">${generateStars(args.rating)}</div>\n              </dva-m-rating-box>\n              <p class=\"dvag-m-recommendation-bar__overlay-rating-label\">${args.rating} von 5 Sternen</p>\n            </div>\n            <h3 class=\"dvag-m-recommendation-bar__overlay-headline\">${args.modalHeadline}</h3>\n            <p class=\"dvag-m-recommendation-bar__overlay-text\">${args.modalText}</p>\n            <div class=\"dvag-m-recommendation-bar__recommendation-items-wrapper\">\n              <a\n                class=\"dva-e-button dva-e-button--secondary dva-e-button--rebrush dva-e-button--icon-only dvag-m-recommendation-bar__recommendation-item\"\n                href=\"\"\n                target=\"_blank\"\n              >\n                <div class=\"dva-e-button__background\"></div>\n                <dva-e-icon class=\"dva-e-icon dva-e-button__icon\" icon-id=\"dva-icon-mail-32px\"></dva-e-icon>\n              </a>\n            </div>\n          </div>\n        </div>\n      </dvag-m-basic-overlay>\n    </div>\n  `;\n};\n\nexport default function (block: HTMLElement) {\n  const headline = block.children[0].textContent || \"\";\n  const text = block.children[1].textContent || \"\";\n  const url = block.children[2].textContent || \"\";\n  const rating = block.children[3].textContent || \"\";\n  const modalHeadline = block.children[4].textContent || \"\";\n  const modalText = block.children[5].textContent || \"\";\n\n  cleanUpBlock(block);\n\n  render(recommendationBarTemplate({ headline, text, url, rating, modalHeadline, modalText }), block);\n}\n"],"names":["openModal","overlay","closeModal","recommendationBarTemplate","args","generateStars","rating","stars","i","html","recommendationBar","block","headline","text","url","modalHeadline","modalText","cleanUpBlock","render"],"mappings":"4HAcA,SAASA,GAAY,CACb,MAAAC,EAAU,SAAS,eAAe,uBAAuB,EAC3DA,IACMA,EAAA,UAAU,IAAI,kBAAkB,EACxC,QAAQ,IAAI,SAAS,EAEzB,CAEA,SAASC,GAAa,CACd,MAAAD,EAAU,SAAS,eAAe,uBAAuB,EAC3DA,GACMA,EAAA,UAAU,OAAO,kBAAkB,CAE/C,CAEA,MAAME,EAA6BC,GAAwC,CACnE,MAAAC,EAAiBC,GAAmB,CACxC,MAAMC,EAAQ,CAAA,EACd,QAASC,EAAI,EAAGA,EAAIF,EAAQE,IACpBD,EAAA,KACJE,sGAAA,EAGG,OAAAF,CAAA,EAEF,OAAAE,iNAKqDL,EAAK,QAAQ,mDAClBA,EAAK,IAAI,kOAICA,EAAK,MAAM,yEACVC,EAAcD,EAAK,MAAM,CAAC,+EAE3BA,EAAK,MAAM,gNAMvDJ,CAAS,0iBAmBTE,CAAU,2UAOmCG,EAAcD,EAAK,MAAM,CAAC,uFAEnBA,EAAK,MAAM,mFAEhBA,EAAK,aAAa,2DACvBA,EAAK,SAAS,2aAgB/E,EAEA,SAAAM,EAAyBC,EAAoB,CAC3C,MAAMC,EAAWD,EAAM,SAAS,CAAC,EAAE,aAAe,GAC5CE,EAAOF,EAAM,SAAS,CAAC,EAAE,aAAe,GACxCG,EAAMH,EAAM,SAAS,CAAC,EAAE,aAAe,GACvCL,EAASK,EAAM,SAAS,CAAC,EAAE,aAAe,GAC1CI,EAAgBJ,EAAM,SAAS,CAAC,EAAE,aAAe,GACjDK,EAAYL,EAAM,SAAS,CAAC,EAAE,aAAe,GAEnDM,EAAaN,CAAK,EAEXO,EAAAf,EAA0B,CAAE,SAAAS,EAAU,KAAAC,EAAM,IAAAC,EAAK,OAAAR,EAAQ,cAAAS,EAAe,UAAAC,EAAW,EAAGL,CAAK,CACpG"}