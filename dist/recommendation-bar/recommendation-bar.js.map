{"version":3,"file":"recommendation-bar.js","sources":["../../src/components/dvag-e-overlay-toggle/dvag-e-overlay-toggle.ts","../../src/blocks/recommendation-bar/recommendation-bar.ts"],"sourcesContent":["import { Component, prop, uiEvent } from \"@kluntje/core\";\nimport { find } from \"@kluntje/js-utils/lib/dom-helpers\";\nimport { DvagBasicOverlay } from \"Components/dvag-m-basic-overlay/dvag-m-basic-overlay\";\n\nexport class DvagOverlayToggle extends Component {\n  @prop({ type: \"string\", defaultValue: \"\" })\n  target: string;\n\n  @uiEvent(\"this\", \"click\")\n  handleClick() {\n    if (this.target === \"\") return;\n    const curTarget = find<DvagBasicOverlay>(document.body, this.target);\n    if (curTarget === null) return;\n    curTarget.open();\n  }\n\n  @uiEvent(\"this\", \"keydown\")\n  handleKeyDown(e: KeyboardEvent) {\n    e.preventDefault();\n    if (e.key !== \"Enter\") return;\n    this.handleClick();\n  }\n}\n\ncustomElements.define(\"dvag-e-overlay-toggle\", DvagOverlayToggle);\n","import { cleanUpBlock } from \"Utils/cleanUpBlock\";\nimport { html, render } from \"lit\";\nimport \"./recommendation-bar.scss\";\nimport { renderIcon } from \"Components/icon/dva-e-icon.template\";\nimport \"Components/dva-m-rating-box/dva-m-rating-box.ts\";\nimport \"Components/dvag-e-overlay-toggle/dvag-e-overlay-toggle.ts\";\nimport \"Components/dvag-m-basic-overlay/dvag-m-basic-overlay.ts\";\n\nimport { IconName } from \"../../icons.types\";\n\ninterface SocialMediaLink {\n  name: string;\n  url: string;\n}\n\ninterface RecommendationBarTemplateArgs {\n  headline?: string;\n  text?: string;\n  rating: string;\n  modalHeadline?: string;\n  modalText?: string;\n  socialMediaLinks: SocialMediaLink[];\n}\n\nconst renderSocialMediaLinks = (socialMediaLinks: SocialMediaLink[]) => {\n  return socialMediaLinks.map(socialMediaLink => {\n    const iconName = `dva-icon-${socialMediaLink.name.toLowerCase()}-24px` as IconName;\n    return html`\n      <a\n        class=\"dva-e-button dva-e-button--secondary dva-e-button--rebrush dva-e-button--icon-only dvag-m-recommendation-bar__recommendation-item\"\n        href=\"${socialMediaLink.url}\"\n        target=\"_blank\"\n      >\n        <div class=\"dva-e-button__background\"></div>\n        ${renderIcon(iconName, \"dva-e-button__icon\")}\n      </a>\n    `;\n  });\n};\n\nconst recommendationBarTemplate = (args: RecommendationBarTemplateArgs) => {\n  return html`\n    <div class=\"dvag-m-recommendation-bar\">\n      <div class=\"dvag-grid\">\n        <div class=\"dvag-grid-row\">\n          <div class=\"dvag-grid-col-1-12 dvag-grid-col-3-7 dvag-grid-col-4-8\">\n            <h3 class=\"dvag-m-recommendation-bar__headline\">${args.headline}</h3>\n            <p class=\"dvag-m-recommendation-bar__text\">${args.text}</p>\n          </div>\n          <div class=\"dvag-m-recommendation-bar__cta-wrapper dvag-grid-col-1-12 dvag-grid-col-3-5 dvag-grid-col-4-4\">\n            <div class=\"dvag-m-recommendation-bar__rating-wrapper\">\n              <dva-m-rating-box class=\"dva-m-rating-box\" rating=\"${args.rating}\"> </dva-m-rating-box>\n              <p class=\"dvag-m-recommendation-bar__rating-label\">${args.rating} von 5 Sternen</p>\n            </div>\n            <dvag-e-overlay-toggle\n              class=\"dvag-e-overlay-toggle dva-e-button dva-e-button--rebrush dva-e-button--small dva-e-button--white\"\n              target=\"#recommendationOverlay\"\n              tabindex=\"0\"\n            >\n              <div class=\"dva-e-button__background\"></div>\n              <span class=\"dva-e-button__label\">Jetzt weiterempfehlen</span>\n            </dvag-e-overlay-toggle>\n          </div>\n        </div>\n      </div>\n      <dvag-m-basic-overlay\n        class=\"dvag-m-basic-overlay dvag-m-recommendation-bar__overlay dva-state-animating\"\n        role=\"dialog\"\n        aria-modal=\"true\"\n        id=\"recommendationOverlay\"\n      >\n        <div class=\"dvag-m-basic-overlay__content\">\n          <div class=\"dvag-m-basic-overlay__inner-content\">\n            <button\n              type=\"button\"\n              class=\"dva-e-button dvag-m-basic-overlay__close dvag-m-recommendation-bar__overlay-close dva-e-button--icon-only\"\n            >\n              <div class=\"dva-e-button__background\"></div>\n              ${renderIcon(\"dva-icon-close\", \"dva-e-button__icon\")}\n            </button>\n            <div class=\"dvag-m-recommendation-bar__overlay-rating-wrapper\">\n              <dva-m-rating-box class=\"dva-m-rating-box\" rating=\"${args.rating}\"></dva-m-rating-box>\n              <p class=\"dvag-m-recommendation-bar__overlay-rating-label\">${args.rating} von 5 Sternen</p>\n            </div>\n            <h3 class=\"dvag-m-recommendation-bar__overlay-headline\">${args.modalHeadline}</h3>\n            <p class=\"dvag-m-recommendation-bar__overlay-text\">${args.modalText}</p>\n            <div class=\"dvag-m-recommendation-bar__recommendation-items-wrapper\">\n              ${renderSocialMediaLinks(args.socialMediaLinks)}\n            </div>\n          </div>\n        </div>\n      </dvag-m-basic-overlay>\n    </div>\n  `;\n};\n\nexport default function (block: HTMLElement) {\n  const headline = block.children[0].textContent || \"\";\n  const text = block.children[1].textContent || \"\";\n  const rating = block.children[2].textContent || \"\";\n  const modalHeadline = block.children[3].textContent || \"\";\n  const modalText = block.children[4].textContent || \"\";\n  const socialMediaLinksItems = block.children[5].getElementsByTagName(\"li\");\n  const socialMediaLinks: SocialMediaLink[] = Array.from(socialMediaLinksItems).map(socialMediaLink => {\n    const link = socialMediaLink.getElementsByTagName(\"a\")[0];\n    return {\n      name: link.textContent || \"\",\n      url: link.href || \"\",\n    };\n  });\n\n  cleanUpBlock(block);\n\n  render(recommendationBarTemplate({ headline, text, rating, modalHeadline, modalText, socialMediaLinks }), block);\n}\n"],"names":["DvagOverlayToggle","Component","curTarget","find","__decorateClass","prop","uiEvent","renderSocialMediaLinks","socialMediaLinks","socialMediaLink","iconName","html","renderIcon","recommendationBarTemplate","args","recommendationBar","block","headline","text","rating","modalHeadline","modalText","socialMediaLinksItems","link","cleanUpBlock","render"],"mappings":"mzBAIO,MAAMA,UAA0BC,CAAU,CAK/C,aAAc,CACZ,GAAI,KAAK,SAAW,GAAI,OACxB,MAAMC,EAAYC,EAAuB,SAAS,KAAM,KAAK,MAAM,EAC/DD,IAAc,MAClBA,EAAU,KAAK,CACjB,CAGA,cAAc,EAAkB,CAC9B,EAAE,eAAe,EACb,EAAE,MAAQ,SACd,KAAK,YAAY,CACnB,CACF,CAhBEE,EAAA,CADCC,EAAK,CAAE,KAAM,SAAU,aAAc,GAAI,CAAA,EAD/BL,EAEX,UAAA,SAAA,CAAA,EAGAI,EAAA,CADCE,EAAQ,OAAQ,OAAO,CAAA,EAJbN,EAKX,UAAA,cAAA,CAAA,EAQAI,EAAA,CADCE,EAAQ,OAAQ,SAAS,CAAA,EAZfN,EAaX,UAAA,gBAAA,CAAA,EAOF,eAAe,OAAO,wBAAyBA,CAAiB,ECAhE,MAAMO,EAA0BC,GACvBA,EAAiB,IAAuBC,GAAA,CAC7C,MAAMC,EAAW,YAAYD,EAAgB,KAAK,aAAa,QACxD,OAAAE,uJAGKF,EAAgB,GAAG,iEAIzBG,EAAWF,EAAU,oBAAoB,CAAC,MAAA,CAGjD,EAGGG,EAA6BC,GAC1BH,iNAKqDG,EAAK,QAAQ,mDAClBA,EAAK,IAAI,kOAICA,EAAK,MAAM,2EACXA,EAAK,MAAM,ixBA0B9DF,EAAW,iBAAkB,oBAAoB,CAAC,8HAGCE,EAAK,MAAM,mFACHA,EAAK,MAAM,mFAEhBA,EAAK,aAAa,2DACvBA,EAAK,SAAS,4EAE/DP,EAAuBO,EAAK,gBAAgB,CAAC,kDAS7D,SAAAC,EAAyBC,EAAoB,CAC3C,MAAMC,EAAWD,EAAM,SAAS,CAAC,EAAE,aAAe,GAC5CE,EAAOF,EAAM,SAAS,CAAC,EAAE,aAAe,GACxCG,EAASH,EAAM,SAAS,CAAC,EAAE,aAAe,GAC1CI,EAAgBJ,EAAM,SAAS,CAAC,EAAE,aAAe,GACjDK,EAAYL,EAAM,SAAS,CAAC,EAAE,aAAe,GAC7CM,EAAwBN,EAAM,SAAS,CAAC,EAAE,qBAAqB,IAAI,EACnER,EAAsC,MAAM,KAAKc,CAAqB,EAAE,IAAuBb,GAAA,CACnG,MAAMc,EAAOd,EAAgB,qBAAqB,GAAG,EAAE,CAAC,EACjD,MAAA,CACL,KAAMc,EAAK,aAAe,GAC1B,IAAKA,EAAK,MAAQ,EAAA,CACpB,CACD,EAEDC,EAAaR,CAAK,EAEXS,EAAAZ,EAA0B,CAAE,SAAAI,EAAU,KAAAC,EAAM,OAAAC,EAAQ,cAAAC,EAAe,UAAAC,EAAW,iBAAAb,EAAkB,EAAGQ,CAAK,CACjH"}