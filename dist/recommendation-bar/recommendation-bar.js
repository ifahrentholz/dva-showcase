import{c as B}from"../__chunks__/cleanUpBlock.VYQGZKWT.js";import{j as E,x as _}from"../__chunks__/lit-element.XkUWx5ik.js";import{r as x}from"../__chunks__/dva-e-icon.template.tppk8KWP.js";import"../__chunks__/dva-m-rating-box.4qyCp2PZ.js";import{O as D,U as w,R as b,M as S}from"../__chunks__/component.module.D5fmAfIh.js";import{f as L,a as c,r as d,o as O,c as C,j as k,w as p}from"../__chunks__/index.module.BEmWgxQc.js";import{S as A,a as f,A as T}from"../__chunks__/cssClasses.CIN72OsW.js";import{a as P,b as F}from"../__chunks__/eventTypes.voneREpA.js";import{_ as K}from"../__chunks__/preload-helper.hlDPvxQM.js";import{w as N}from"../__chunks__/waitForInitialization.1sUzfAAC.js";var R=Object.defineProperty,j=Object.getOwnPropertyDescriptor,u=(a,e,t,n)=>{for(var r=n>1?void 0:n?j(e,t):e,s=a.length-1,i;s>=0;s--)(i=a[s])&&(r=(n?i(e,t,r):i(r))||r);return n&&r&&R(e,t,r),r};class o extends w{handleClick(){if(this.target==="")return;const e=L(document.body,this.target);e!==null&&e.open()}handleKeyDown(e){e.preventDefault(),e.key==="Enter"&&this.handleClick()}}u([D({type:"string",defaultValue:""})],o.prototype,"target",2);u([b("this","click")],o.prototype,"handleClick",1);u([b("this","keydown")],o.prototype,"handleKeyDown",1);customElements.define("dvag-e-overlay-toggle",o);let m=0;const V=()=>{m=window.pageYOffset,c(document.body,A),document.body.style.top=`-${m}px`},U=()=>{d(document.body,A),document.body.style.top="",window.scrollTo(0,m)};class W{constructor(){this.debugModeActive=!1}log(e,...t){this.debugModeActive!==!1&&console.log(e,...t)}warn(e,...t){this.debugModeActive!==!1&&console.warn(e,...t)}error(e,...t){this.debugModeActive!==!1&&console.error(e,...t)}}const Y=new W,l=class l{constructor(){this._focusTrapped=!1,this.tabableElementsMap=new WeakMap,this.trapTargetList=[],this.eventBindingMap={},this.eventIdMap=new WeakMap}get focusTrapped(){return this._focusTrapped}set focusTrapped(e){this._focusTrapped!==e&&(e===!0?O(document.body,["keydown"],this.handleKeyDown,this):C(document.body,["keydown"],this.handleKeyDown,this),this._focusTrapped=e)}get currentTrapTarget(){return this.trapTargetList.length===0?null:this.trapTargetList[this.trapTargetList.length-1]}get firstTabableElement(){return this.currentTrapTarget===null?null:this.getFirstTabableElementOf(this.currentTrapTarget)}get lastTabableElement(){return this.currentTrapTarget===null?null:this.getLastTabableElementOf(this.currentTrapTarget)}get firstTabableElementActive(){return this.currentTrapTarget===null?!1:this.isFirstTabableElementActive(this.currentTrapTarget)}get lastTabableElementActive(){return this.currentTrapTarget===null?!1:this.isLastTabableElementActive(this.currentTrapTarget)}trapFocusIn(e){var n;const t=this.tabableElementsIn(e);t.length!==0&&(this.trapTargetList.push(e),this.tabableElementsMap.set(e,{activeElementBeforeTrapped:document.activeElement,tabableElements:t}),this.focusTrapped=!0,(n=this.firstTabableElement)==null||n.focus())}unTrapFocusIn(e){var n;this.trapTargetList=this.trapTargetList.filter(r=>r!==e);const t=((n=this.tabableElementsMap.get(e))==null?void 0:n.activeElementBeforeTrapped)||null;try{t!==null&&t.focus()}catch(r){Y.error("FocusService: ",r)}this.tabableElementsMap.delete(e),this.trapTargetList.length===0&&(this.focusTrapped=!1)}handleKeyDown(e){var t,n;e.key==="Tab"&&(e.shiftKey&&this.firstTabableElementActive?((t=this.lastTabableElement)==null||t.focus(),e.preventDefault()):e.shiftKey===!1&&this.lastTabableElementActive&&((n=this.firstTabableElement)==null||n.focus(),e.preventDefault()))}tabableElementsIn(e){return k(e,l.TABABLE_ELEMENTS_SELECTOR)}getFirstTabableElementOf(e){var n;const t=((n=this.tabableElementsMap.get(e))==null?void 0:n.tabableElements)||[];return t.length===0?null:t[0]}getLastTabableElementOf(e){var n;const t=((n=this.tabableElementsMap.get(e))==null?void 0:n.tabableElements)||[];return t.length===0?null:t[t.length-1]}isFirstTabableElementActive(e){const t=this.getFirstTabableElementOf(e);return t===null?!1:t===document.activeElement}isLastTabableElementActive(e){const t=this.getLastTabableElementOf(e);return t===null?!1:t===document.activeElement}};l.TABABLE_ELEMENTS_SELECTOR='button, a[href], input, select, textarea, [tabindex]:not([tabindex="-1"])';let v=l;const y=new v;class z{constructor(){this.lightboxInstance=null}createLightbox(e){this.renderLightbox({imageUrl:e,cssClasses:"dvag-m-basic-overlay--lightbox"})}destroyLightbox(){this.lightboxInstance!==null&&(this.lightboxInstance.close(),document.body.removeChild(this.lightboxInstance),this.lightboxInstance=null)}async renderLightbox(e){const t=await this.loadOverlayTemplate(),n=document.createElement("div");E(t(e),n);const r=L(n,".dvag-m-basic-overlay");r!==null&&(document.body.appendChild(r),this.lightboxInstance=r,await N(r),r.open())}async loadOverlayTemplate(){const{renderBasicOverlayAsLightbox:e}=await K(()=>import("../__chunks__/dvag-m-basic-overlay.template.jjht13G0.js"),__vite__mapDeps([0,1]));return e}}const H=new z;var G=Object.defineProperty,J=Object.getOwnPropertyDescriptor,M=(a,e,t,n)=>{for(var r=n>1?void 0:n?J(e,t):e,s=a.length-1,i;s>=0;s--)(i=a[s])&&(r=(n?i(e,t,r):i(r))||r);return n&&r&&G(e,t,r),r};class h extends w{async close(){U(),d(this,f),await p(300),d(this,T),C(window,"keyup",this.handleKeyboardsEvents,this),y.unTrapFocusIn(this),H.destroyLightbox(),this.dispatchEvent(new CustomEvent(P))}async open(){V(),c(this,T),await p(100),c(this,f),O(window,"keyup",this.handleKeyboardsEvents,this),y.trapFocusIn(this),this.dispatchEvent(new CustomEvent(F))}handleKeyboardsEvents(e){e.key==="Escape"&&this.close()}handleCookieChange(){}handleOverlayClick(e){}handleCloseBtnClick(){this.close()}}M([S(".dvag-m-basic-overlay__close")],h.prototype,"closeBtn",2);M([b("closeBtn","click")],h.prototype,"handleCloseBtnClick",1);customElements.define("dvag-m-basic-overlay",h);const q=a=>a.map(e=>{const t=`dva-icon-${e.name.toLowerCase()}-24px`;return _`<a class="dva-e-button dva-e-button--secondary dva-e-button--rebrush dva-e-button--icon-only dvag-m-recommendation-bar__recommendation-item" href="${e.url}" target="_blank"><div class="dva-e-button__background"></div>${x(t,"dva-e-button__icon")}</a>`}),Q=a=>_`<div class="dvag-m-recommendation-bar"><div class="dvag-grid"><div class="dvag-grid-row"><div class="dvag-grid-col-1-12 dvag-grid-col-3-7 dvag-grid-col-4-8"><h3 class="dvag-m-recommendation-bar__headline">${a.headline}</h3><p class="dvag-m-recommendation-bar__text">${a.text}</p></div><div class="dvag-m-recommendation-bar__cta-wrapper dvag-grid-col-1-12 dvag-grid-col-3-5 dvag-grid-col-4-4"><div class="dvag-m-recommendation-bar__rating-wrapper"><dva-m-rating-box class="dva-m-rating-box" rating="${a.rating}"></dva-m-rating-box><p class="dvag-m-recommendation-bar__rating-label">${a.rating} von 5 Sternen</p></div><dvag-e-overlay-toggle class="dvag-e-overlay-toggle dva-e-button dva-e-button--rebrush dva-e-button--small dva-e-button--white" target="#recommendationOverlay" tabindex="0"><div class="dva-e-button__background"></div><span class="dva-e-button__label">Jetzt weiterempfehlen</span></dvag-e-overlay-toggle></div></div></div><dvag-m-basic-overlay class="dvag-m-basic-overlay dvag-m-recommendation-bar__overlay dva-state-animating" role="dialog" aria-modal="true" id="recommendationOverlay"><div class="dvag-m-basic-overlay__content"><div class="dvag-m-basic-overlay__inner-content"><button type="button" class="dva-e-button dvag-m-basic-overlay__close dvag-m-recommendation-bar__overlay-close dva-e-button--icon-only"><div class="dva-e-button__background"></div>${x("dva-icon-close","dva-e-button__icon")}</button><div class="dvag-m-recommendation-bar__overlay-rating-wrapper"><dva-m-rating-box class="dva-m-rating-box" rating="${a.rating}"></dva-m-rating-box><p class="dvag-m-recommendation-bar__overlay-rating-label">${a.rating} von 5 Sternen</p></div><h3 class="dvag-m-recommendation-bar__overlay-headline">${a.modalHeadline}</h3><p class="dvag-m-recommendation-bar__overlay-text">${a.modalText}</p><div class="dvag-m-recommendation-bar__recommendation-items-wrapper">${q(a.socialMediaLinks)}</div></div></div></dvag-m-basic-overlay></div>`;function oe(a){const e=a.children[0].textContent||"",t=a.children[1].textContent||"",n=a.children[2].textContent||"",r=a.children[3].textContent||"",s=a.children[4].textContent||"",i=a.children[5].getElementsByTagName("li"),I=Array.from(i).map($=>{const g=$.getElementsByTagName("a")[0];return{name:g.textContent||"",url:g.href||""}});B(a),E(Q({headline:e,text:t,rating:n,modalHeadline:r,modalText:s,socialMediaLinks:I}),a)}export{oe as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["__chunks__/dvag-m-basic-overlay.template.jjht13G0.js","__chunks__/lit-element.XkUWx5ik.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
//# sourceMappingURL=recommendation-bar.js.map
